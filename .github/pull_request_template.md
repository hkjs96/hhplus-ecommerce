## :pushpin: PR 제목 규칙
[STEP09 또는 STEP10] 이름 - 선택 시나리오 (e-commerce / concert)

---

## :clipboard: 핵심 체크리스트 :white_check_mark:

### STEP09 - Concurrency (2개)
- [ ] 애플리케이션 내에서 발생 가능한 **동시성 문제를 식별**했는가?
- [ ] 보고서에 DB를 활용한 **동시성 문제 해결 방안**이 포함되어 있는가?

---

### STEP10 - Finalize (1개)
- [ ] **동시성 문제를 드러낼 수 있는 통합 테스트**를 작성했는가?

---

## 📋 **상세 체크리스트**

### 🔍 **동시성 문제 식별** (STEP09 필수)
- [ ] **재고 차감**: Race Condition 시나리오를 식별했는가?
- [ ] **쿠폰 발급**: 선착순 쿠폰 중복 발급 문제를 분석했는가?
- [ ] **결제 처리**: 중복 결제 및 잔액 차감 동시성 문제를 파악했는가?
- [ ] **주문 상태**: 동시 상태 변경으로 인한 불일치를 확인했는가?
- [ ] **포인트/잔액**: 동시 충전/차감으로 인한 손실 가능성을 검토했는가?

### 🛠️ **DB 기반 동시성 제어** (STEP09 필수)
- [ ] **격리 수준**: 트랜잭션 격리 수준을 적절히 설정했는가?
- [ ] **비관적 락**: `SELECT FOR UPDATE`를 활용한 락 전략을 구현했는가?
- [ ] **낙관적 락**: `@Version`을 활용한 충돌 감지를 구현했는가?
- [ ] **Named Lock**: 필요시 분산 락을 고려했는가?
- [ ] **인덱스**: Lock 범위 최소화를 위한 인덱스가 설정되었는가?

### 📝 **보고서 작성** (STEP09 필수)
- [ ] **문제 식별**: 어떤 동시성 문제가 발생할 수 있는지 명확히 기술했는가?
- [ ] **원인 분석**: Race Condition이 발생하는 시나리오를 시각화했는가?
- [ ] **해결 방안**: 선택한 동시성 제어 방식과 근거를 설명했는가?
- [ ] **대안 비교**: 다른 접근법과 비교 분석을 포함했는가?
- [ ] **트레이드오프**: 성능, 복잡도, 안정성 측면의 장단점을 기술했는가?

### 🧪 **통합 테스트** (STEP10 필수)
- [ ] **동시 요청**: ExecutorService를 활용한 멀티스레드 테스트를 작성했는가?
- [ ] **재고 검증**: 동시 구매 시 음수 재고가 발생하지 않는지 확인했는가?
- [ ] **쿠폰 검증**: 정확히 N개만 발급되는지 검증했는가?
- [ ] **결제 검증**: 중복 결제가 발생하지 않는지 확인했는가?
- [ ] **실패 복구**: 트랜잭션 실패 시 롤백이 정상적으로 동작하는가?

---

## 🔒 **동시성 제어 방식**

### 선택한 방식
**주요 방식:**
- [ ] 비관적 락 (Pessimistic Lock)
- [ ] 낙관적 락 (Optimistic Lock)
- [ ] 분산 락 (Redis Lock)
- [ ] 혼합 전략 (Hybrid)

**세부 전략:**
- 재고 차감: ___________
- 쿠폰 발급: ___________
- 결제 처리: ___________
- 주문 상태: ___________

### 구현 근거
**비즈니스 요구사항:**
-

**기술적 고려사항:**
-

**성능 목표:**
- TPS: _____
- 응답시간(P95): _____ms
- 에러율: _____% 이하

---

## 🔗 **주요 구현 커밋**

<!-- 커밋 해시와 함께 작성해주세요 -->
- 동시성 문제 분석 문서 작성: `[커밋 링크]`
- 비관적 락 구현: `[커밋 링크]`
- 낙관적 락 구현: `[커밋 링크]`
- 트랜잭션 격리 수준 설정: `[커밋 링크]`
- 동시성 통합 테스트 작성: `[커밋 링크]`
- 성능 테스트 및 최적화: `[커밋 링크]`

---

## 📊 **성능 측정 결과**

### 부하 테스트 결과
| 시나리오 | TPS | P50 | P95 | P99 | 에러율 |
|---------|-----|-----|-----|-----|--------|
| 상품 조회 | | | | | |
| 재고 차감 | | | | | |
| 쿠폰 발급 | | | | | |
| 주문 생성 | | | | | |
| 결제 처리 | | | | | |

### 병목 지점
1.
2.
3.

### 개선 방안
-

---

## 🧪 **테스트 결과**

| 항목 | 결과 |
|------|------|
| 단위 테스트 | X개 (커버리지 X%) |
| 통합 테스트 | X개 |
| 동시성 테스트 | 통과/실패 |
| 부하 테스트 | 수행/미수행 |

### 주요 테스트 시나리오
- [ ] 100명이 동시에 재고 1개 상품 구매 → 1명만 성공
- [ ] 200명이 선착순 100개 쿠폰 신청 → 정확히 100개만 발급
- [ ] 동일 주문에 대한 중복 결제 요청 → 1번만 처리
- [ ] 동시 잔액 충전/차감 → 최종 잔액 정확성 보장

---

## 💬 **리뷰 요청 사항**

### 기술적 고민 포인트
1.
2.
3.

### 트레이드오프 결정
**A vs B:**
- 선택:
- 이유:
- 우려사항:

---

## 📝 **보고서 링크**

- 동시성 문제 분석: `docs/week5/CONCURRENCY_ANALYSIS.md`
- 해결 방안 비교: `docs/week5/SOLUTION_COMPARISON.md`
- 구현 가이드: `docs/week5/IMPLEMENTATION_GUIDE.md`
- 테스트 전략: `docs/week5/TEST_STRATEGY.md`
- 성능 최적화: `docs/week5/PERFORMANCE_OPTIMIZATION.md`

---

## 🎯 **아키텍처 개선사항**

### 트랜잭션 경계
-

### 락 전략
-

### 인덱스 추가
-

---

## ✍️ 간단 회고 (3줄 이내)

**잘한 점**:


**어려웠던 점**:


**다음 시도**:


---

## 📚 **참고 자료**

### 학습 자료
-

### 벤치마크 케이스
-

---

## ✋ **최종 체크리스트 (제출 전 확인)**

### 문서
- [ ] 동시성 문제 식별 문서가 작성되었는가?
- [ ] DB 기반 해결 방안이 명확히 기술되었는가?
- [ ] 대안 비교 분석이 포함되었는가?
- [ ] 성능 측정 결과가 포함되었는가?

### 코드
- [ ] 트랜잭션 경계가 적절히 설정되었는가?
- [ ] 락 전략이 일관되게 적용되었는가?
- [ ] 예외 처리 및 롤백이 정상 동작하는가?
- [ ] Dead Lock 발생 가능성을 검토했는가?

### 테스트
- [ ] 동시성 테스트가 실제 문제를 재현하는가?
- [ ] 테스트가 안정적으로 통과하는가? (100회 실행)
- [ ] 실패 시나리오 테스트가 포함되었는가?
- [ ] 성능 테스트를 수행했는가?

### 성능
- [ ] 목표 TPS를 달성했는가?
- [ ] 응답 시간이 SLA 내에 있는가?
- [ ] 에러율이 허용 범위 내인가?
- [ ] 병목 지점을 식별하고 개선했는가?
