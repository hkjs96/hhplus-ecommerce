# Week 4 - STEP 8: DB ìµœì í™” ë³´ê³ ì„œ

> **ì‘ì„±ì**: [ì´ë¦„]
> **ì‘ì„±ì¼**: 2025-XX-XX
> **ëŒ€ìƒ ê¸°ëŠ¥**: [ìµœì í™” ëŒ€ìƒ ê¸°ëŠ¥ ì´ë¦„]

---

## ğŸ“‹ ëª©ì°¨

1. [ë¬¸ì œ ì •ì˜](#1-ë¬¸ì œ-ì •ì˜)
2. [ì›ì¸ ë¶„ì„](#2-ì›ì¸-ë¶„ì„)
3. [í•´ê²° ë°©ì•ˆ](#3-í•´ê²°-ë°©ì•ˆ)
4. [ìµœì í™” ê²°ê³¼](#4-ìµœì í™”-ê²°ê³¼)
5. [ê²°ë¡ ](#5-ê²°ë¡ )

---

## 1. ë¬¸ì œ ì •ì˜

### 1.1. ëŒ€ìƒ ê¸°ëŠ¥

**API**: `GET /products/top?period=3days`

**ë¹„ì¦ˆë‹ˆìŠ¤ ìš”êµ¬ì‚¬í•­**:
- ìµœê·¼ 3ì¼ê°„ íŒë§¤ëŸ‰ ê¸°ì¤€ Top 5 ìƒí’ˆì„ ì¡°íšŒ
- ë©”ì¸ í˜ì´ì§€ì—ì„œ í˜¸ì¶œë˜ëŠ” í•µì‹¬ API
- ì¼ í‰ê·  100ë§Œ ê±´ í˜¸ì¶œ

### 1.2. í˜„ì¬ ì„±ëŠ¥

| ì§€í‘œ | í˜„ì¬ ê°’ | ëª©í‘œ ê°’ |
|------|---------|---------|
| í‰ê·  ì‘ë‹µ ì‹œê°„ | 500ms | 100ms ì´ë‚´ |
| 95 percentile | 800ms | 200ms ì´ë‚´ |
| ìµœëŒ€ ì‘ë‹µ ì‹œê°„ | 1200ms | 500ms ì´ë‚´ |

### 1.3. ë¹„ì¦ˆë‹ˆìŠ¤ ì˜í–¥

- **ì‚¬ìš©ì ê²½í—˜ ì €í•˜**: í˜ì´ì§€ ë¡œë”© ì§€ì—°ìœ¼ë¡œ ì´íƒˆë¥  ì¦ê°€
- **ì„œë²„ ë¶€í•˜**: ë†’ì€ CPU ì‚¬ìš©ë¥  (í‰ê·  70%)
- **ë¹„ìš© ì¦ê°€**: ì„œë²„ ìŠ¤ì¼€ì¼ ì•„ì›ƒ í•„ìš”

---

## 2. ì›ì¸ ë¶„ì„

### 2.1. í˜„ì¬ ì¿¼ë¦¬

```sql
SELECT p.id, p.name, SUM(oi.quantity) AS sales_count
FROM products p
JOIN order_items oi ON p.id = oi.product_id
JOIN orders o ON oi.order_id = o.id
WHERE o.created_at >= DATE_SUB(NOW(), INTERVAL 3 DAY)
  AND o.status = 'COMPLETED'
GROUP BY p.id, p.name
ORDER BY sales_count DESC
LIMIT 5;
```

### 2.2. EXPLAIN ë¶„ì„

```sql
EXPLAIN SELECT p.id, p.name, SUM(oi.quantity) AS sales_count
FROM products p
JOIN order_items oi ON p.id = oi.product_id
JOIN orders o ON oi.order_id = o.id
WHERE o.created_at >= DATE_SUB(NOW(), INTERVAL 3 DAY)
  AND o.status = 'COMPLETED'
GROUP BY p.id, p.name
ORDER BY sales_count DESC
LIMIT 5;
```

**ì‹¤í–‰ ê²°ê³¼:**

```
+----+-------------+-------+------+---------------+------+---------+------+-------+----------+-----------------------------+
| id | select_type | table | type | possible_keys | key  | key_len | ref  | rows  | filtered | Extra                       |
+----+-------------+-------+------+---------------+------+---------+------+-------+----------+-----------------------------+
|  1 | SIMPLE      | o     | ALL  | NULL          | NULL | NULL    | NULL | 50000 |    33.33 | Using where; Using temporary|
|  1 | SIMPLE      | oi    | ALL  | NULL          | NULL | NULL    | NULL | 80000 |    10.00 | Using where; Using filesort |
|  1 | SIMPLE      | p     | ref  | PRIMARY       | id   | 8       | oi.product_id | 1 | 100.00 | NULL                 |
+----+-------------+-------+------+---------------+------+---------+------+-------+----------+-----------------------------+
```

### 2.3. ë³‘ëª© ì§€ì  ì‹ë³„

**1. `orders` í…Œì´ë¸” ì „ì²´ ìŠ¤ìº”**
- `type: ALL` (ì „ì²´ í…Œì´ë¸” ìŠ¤ìº”)
- `rows: 50,000` (ì „ì²´ ì£¼ë¬¸ ë°ì´í„° ìŠ¤ìº”)
- `key: NULL` (ì¸ë±ìŠ¤ ë¯¸ì‚¬ìš©)

**2. `order_items` í…Œì´ë¸” ì „ì²´ ìŠ¤ìº”**
- `type: ALL` (ì „ì²´ í…Œì´ë¸” ìŠ¤ìº”)
- `rows: 80,000` (ì „ì²´ ì£¼ë¬¸ ìƒí’ˆ ìŠ¤ìº”)

**3. ì •ë ¬ ë° ì„ì‹œ í…Œì´ë¸” ì‚¬ìš©**
- `Using temporary` (ì„ì‹œ í…Œì´ë¸” ìƒì„±)
- `Using filesort` (ì •ë ¬ ì‘ì—… ìˆ˜í–‰)

### 2.4. ë°ì´í„° ê·œëª¨ ë° ì¦ê°€ ì¶”ì´

| í…Œì´ë¸” | í˜„ì¬ í–‰ ìˆ˜ | ì›” ì¦ê°€ëŸ‰ | ì˜ˆìƒ (6ê°œì›” í›„) |
|--------|-----------|----------|----------------|
| `products` | 10,000 | 500 | 13,000 |
| `orders` | 50,000 | 10,000 | 110,000 |
| `order_items` | 80,000 | 15,000 | 170,000 |

**ë¶„ì„**: ë°ì´í„°ê°€ ì¦ê°€í•˜ë©´ ì„±ëŠ¥ì´ ë”ìš± ì €í•˜ë  ê²ƒìœ¼ë¡œ ì˜ˆìƒ

---

## 3. í•´ê²° ë°©ì•ˆ

### ë°©ì•ˆ 1: ë³µí•© ì¸ë±ìŠ¤ ì¶”ê°€

#### 3.1.1. ì œì•ˆ ë‚´ìš©

```sql
-- orders í…Œì´ë¸”ì— ë³µí•© ì¸ë±ìŠ¤ ì¶”ê°€
CREATE INDEX idx_created_status ON orders(created_at, status);

-- order_items í…Œì´ë¸”ì— ë³µí•© ì¸ë±ìŠ¤ ì¶”ê°€
CREATE INDEX idx_order_product_qty ON order_items(order_id, product_id, quantity);
```

#### 3.1.2. ì˜ˆìƒ íš¨ê³¼

**EXPLAIN ê²°ê³¼ (ì˜ˆìƒ):**

```
+----+-------------+-------+-------+----------------------+----------------------+---------+------+------+----------+-------------+
| id | select_type | table | type  | possible_keys        | key                  | key_len | ref  | rows | filtered | Extra       |
+----+-------------+-------+-------+----------------------+----------------------+---------+------+------+----------+-------------+
|  1 | SIMPLE      | o     | range | idx_created_status   | idx_created_status   | 8       | NULL | 5000 |   100.00 | Using where |
|  1 | SIMPLE      | oi    | ref   | idx_order_product_qty| idx_order_product_qty| 8       | o.id | 2    |   100.00 | Using index |
|  1 | SIMPLE      | p     | ref   | PRIMARY              | id                   | 8       | oi.product_id | 1 | 100.00 | NULL     |
+----+-------------+-------+-------+----------------------+----------------------+---------+------+------+----------+-------------+
```

**ê°œì„  ì‚¬í•­:**
- `orders` ìŠ¤ìº” í–‰ ìˆ˜: 50,000 â†’ 5,000 (10% ê°ì†Œ)
- `order_items` type: ALL â†’ ref (ì¸ë±ìŠ¤ ì‚¬ìš©)
- ì˜ˆìƒ ì‘ë‹µ ì‹œê°„: 500ms â†’ 50ms

#### 3.1.3. ì¥ë‹¨ì 

**ì¥ì :**
- âœ… êµ¬í˜„ì´ ê°„ë‹¨í•¨
- âœ… ì‹¤ì‹œê°„ ë°ì´í„° ìœ ì§€
- âœ… ì €ì¥ ê³µê°„ ì ê²Œ ì°¨ì§€ (ì•½ 10MB)

**ë‹¨ì :**
- âŒ ì—¬ì „íˆ ë§¤ë²ˆ JOIN í•„ìš”
- âŒ ë°ì´í„° ì¦ê°€ ì‹œ ì„±ëŠ¥ ì €í•˜ ìš°ë ¤
- âŒ `INSERT`/`UPDATE` ì„±ëŠ¥ ì•½ê°„ ì €í•˜ (5-10%)

---

### ë°©ì•ˆ 2: ë¹„ì •ê·œí™” (ì§‘ê³„ í…Œì´ë¸”)

#### 3.2.1. ì œì•ˆ ë‚´ìš©

```sql
-- ì¸ê¸° ìƒí’ˆ ì§‘ê³„ í…Œì´ë¸” ìƒì„±
CREATE TABLE popular_products (
    id BIGINT PRIMARY KEY AUTO_INCREMENT,
    product_id BIGINT NOT NULL,
    product_name VARCHAR(100) NOT NULL,
    sales_count INT NOT NULL,
    revenue BIGINT NOT NULL,
    period VARCHAR(20) NOT NULL,  -- '3days', '7days', '30days'
    calculated_at DATETIME NOT NULL,
    INDEX idx_period_sales (period, sales_count DESC),
    INDEX idx_calculated_at (calculated_at)
);
```

**ë°°ì¹˜ ì‘ì—… (Spring Scheduled):**

```java
@Component
@RequiredArgsConstructor
public class PopularProductBatch {

    private final JdbcTemplate jdbcTemplate;

    @Scheduled(cron = "0 */5 * * * *")  // 5ë¶„ë§ˆë‹¤ ì‹¤í–‰
    @Transactional
    public void updatePopularProducts() {
        // ê¸°ì¡´ ë°ì´í„° ì‚­ì œ
        jdbcTemplate.update("DELETE FROM popular_products WHERE period = '3days'");

        // ì§‘ê³„ ë°ì´í„° ì‚½ì…
        String sql = """
            INSERT INTO popular_products (product_id, product_name, sales_count, revenue, period, calculated_at)
            SELECT p.id, p.name, SUM(oi.quantity), SUM(oi.quantity * p.price), '3days', NOW()
            FROM products p
            JOIN order_items oi ON p.id = oi.product_id
            JOIN orders o ON oi.order_id = o.id
            WHERE o.created_at >= DATE_SUB(NOW(), INTERVAL 3 DAY)
              AND o.status = 'COMPLETED'
            GROUP BY p.id, p.name
            ORDER BY SUM(oi.quantity) DESC
            LIMIT 5
            """;

        jdbcTemplate.update(sql);
    }
}
```

**ì¡°íšŒ ì¿¼ë¦¬:**

```sql
SELECT product_id, product_name, sales_count, revenue
FROM popular_products
WHERE period = '3days'
ORDER BY sales_count DESC;
```

#### 3.2.2. ì˜ˆìƒ íš¨ê³¼

**EXPLAIN ê²°ê³¼ (ì˜ˆìƒ):**

```
+----+-------------+-------------------+------+----------------+----------------+---------+-------+------+----------+-------------+
| id | select_type | table             | type | possible_keys  | key            | key_len | ref   | rows | filtered | Extra       |
+----+-------------+-------------------+------+----------------+----------------+---------+-------+------+----------+-------------+
|  1 | SIMPLE      | popular_products  | ref  | idx_period_sales| idx_period_sales| 22     | const | 5    |   100.00 | Using index |
+----+-------------+-------------------+------+----------------+----------------+---------+-------+------+----------+-------------+
```

**ê°œì„  ì‚¬í•­:**
- ìŠ¤ìº” í–‰ ìˆ˜: 130,000 â†’ 5 (99.9% ê°ì†Œ)
- JOIN ì œê±°
- ì˜ˆìƒ ì‘ë‹µ ì‹œê°„: 500ms â†’ 5ms

#### 3.2.3. ì¥ë‹¨ì 

**ì¥ì :**
- âœ… ë§¤ìš° ë¹ ë¥¸ ì‘ë‹µ ì†ë„ (5ms)
- âœ… ë°ì´í„° ì¦ê°€ì— ì˜í–¥ ì—†ìŒ
- âœ… ì„œë²„ ë¶€í•˜ ëŒ€í­ ê°ì†Œ

**ë‹¨ì :**
- âŒ ìµœëŒ€ 5ë¶„ì˜ ë°ì´í„° ì§€ì—°
- âŒ ì €ì¥ ê³µê°„ ì¶”ê°€ í•„ìš” (ì•½ 5MB)
- âŒ ë°°ì¹˜ ì‘ì—… êµ¬í˜„ ë³µì¡ë„
- âŒ ë°°ì¹˜ ì‘ì—… ì‹¤íŒ¨ ì‹œ ë°ì´í„° ëˆ„ë½ ìœ„í—˜

---

### ë°©ì•ˆ 3: ìºì‹± (Redis)

#### 3.3.1. ì œì•ˆ ë‚´ìš©

```java
@Service
@RequiredArgsConstructor
public class PopularProductService {

    private final ProductRepository productRepository;

    @Cacheable(value = "popularProducts", key = "#period")
    public List<PopularProductResponse> getTopProducts(String period) {
        // ê¸°ì¡´ ì¿¼ë¦¬ ì‹¤í–‰
        // ...
    }
}
```

**Redis ì„¤ì •:**

```yaml
spring:
  redis:
    host: localhost
    port: 6379
  cache:
    type: redis
    redis:
      time-to-live: 300000  # 5ë¶„
```

#### 3.3.2. ì˜ˆìƒ íš¨ê³¼

- ì²« ìš”ì²­: 500ms (ìºì‹œ ë¯¸ìŠ¤, DB ì¡°íšŒ)
- ì´í›„ ìš”ì²­: 10ms (ìºì‹œ íˆíŠ¸)

#### 3.3.3. ì¥ë‹¨ì 

**ì¥ì :**
- âœ… êµ¬í˜„ ê°„ë‹¨ (Spring Cache ì‚¬ìš©)
- âœ… ì‹¤ì‹œê°„ì— ê°€ê¹Œìš´ ë°ì´í„° (ìµœëŒ€ 5ë¶„ ì§€ì—°)
- âœ… ìºì‹œ ì›Œë°ì—… ê°€ëŠ¥

**ë‹¨ì :**
- âŒ Redis ì¸í”„ë¼ ì¶”ê°€ í•„ìš”
- âŒ ì²« ìš”ì²­ì€ ì—¬ì „íˆ ëŠë¦¼
- âŒ ìºì‹œ ë¬´íš¨í™” ì „ëµ í•„ìš”

---

### ë°©ì•ˆ ë¹„êµ

| ë°©ì•ˆ | ì‘ë‹µ ì‹œê°„ | ë°ì´í„° ì‹ ì„ ë„ | êµ¬í˜„ ë³µì¡ë„ | ì €ì¥ ê³µê°„ | ì¸í”„ë¼ ì¶”ê°€ | ì¶”ì²œ |
|------|----------|--------------|------------|----------|------------|------|
| **ì¸ë±ìŠ¤ ì¶”ê°€** | 50ms | ì‹¤ì‹œê°„ | ë‚®ìŒ | ì‘ìŒ (10MB) | ì—†ìŒ | â­â­â­ |
| **ë¹„ì •ê·œí™”** | 5ms | 5ë¶„ ì§€ì—° | ë†’ìŒ | ì¤‘ê°„ (5MB) | ì—†ìŒ | â­â­â­â­â­ |
| **ìºì‹±** | 10ms | 5ë¶„ ì§€ì—° | ì¤‘ê°„ | ì‘ìŒ | Redis í•„ìš” | â­â­â­â­ |

---

## 4. ìµœì í™” ê²°ê³¼

### 4.1. ì„ íƒ ë°©ì•ˆ

**Phase 1 (ë‹¨ê¸°)**: ì¸ë±ìŠ¤ ì¶”ê°€
- ë³µí•© ì¸ë±ìŠ¤ ì¶”ê°€ë¡œ ì¦‰ì‹œ ì„±ëŠ¥ ê°œì„ 
- ë°°í¬ ì¦‰ì‹œ ì ìš© ê°€ëŠ¥

**Phase 2 (ì¤‘ê¸°)**: ë¹„ì •ê·œí™” (ì§‘ê³„ í…Œì´ë¸”)
- ì¥ê¸°ì ìœ¼ë¡œ ê°€ì¥ íš¨ê³¼ì 
- ë°°ì¹˜ ì‘ì—… êµ¬í˜„ í›„ ì ìš©

**ì„ íƒ ì´ìœ **:
- ë‹¨ê¸°ì ìœ¼ë¡œ ì¸ë±ìŠ¤ ì¶”ê°€ë¡œ ì„±ëŠ¥ ê°œì„  (500ms â†’ 50ms)
- ì¤‘ê¸°ì ìœ¼ë¡œ ë¹„ì •ê·œí™”ë¡œ ìµœì¢… ëª©í‘œ ë‹¬ì„± (50ms â†’ 5ms)
- ì‹¤ì‹œê°„ ë°ì´í„°ë³´ë‹¤ ì„±ëŠ¥ì´ ë” ì¤‘ìš”í•œ ìš”êµ¬ì‚¬í•­

---

### 4.2. ì„±ëŠ¥ ê°œì„  ìˆ˜ì¹˜

#### 4.2.1. ì‘ë‹µ ì‹œê°„ ë¹„êµ

| ì§€í‘œ | ê°œì„  ì „ | Phase 1 (ì¸ë±ìŠ¤) | Phase 2 (ë¹„ì •ê·œí™”) | ê°œì„ ìœ¨ |
|------|---------|-----------------|-------------------|--------|
| í‰ê·  ì‘ë‹µ ì‹œê°„ | 500ms | 50ms | 5ms | **99%** |
| 95 percentile | 800ms | 80ms | 8ms | **99%** |
| ìµœëŒ€ ì‘ë‹µ ì‹œê°„ | 1200ms | 120ms | 12ms | **99%** |

#### 4.2.2. ë°ì´í„°ë² ì´ìŠ¤ ë¶€í•˜

| ì§€í‘œ | ê°œì„  ì „ | Phase 1 (ì¸ë±ìŠ¤) | Phase 2 (ë¹„ì •ê·œí™”) | ê°œì„ ìœ¨ |
|------|---------|-----------------|-------------------|--------|
| ìŠ¤ìº” í–‰ ìˆ˜ | 130,000 | 5,000 | 5 | **99.9%** |
| CPU ì‚¬ìš©ë¥  | 70% | 40% | 10% | **85%** |
| ë©”ëª¨ë¦¬ ì‚¬ìš©ë¥  | 80% | 60% | 40% | **50%** |

#### 4.2.3. ë¹„ìš© ë¶„ì„

**Phase 1 (ì¸ë±ìŠ¤ ì¶”ê°€):**
- ì €ì¥ ê³µê°„: +10MB (ë¬´ì‹œ ê°€ëŠ¥)
- ê°œë°œ ì‹œê°„: 1ì¼
- ì¶”ê°€ ì¸í”„ë¼ ë¹„ìš©: ì—†ìŒ

**Phase 2 (ë¹„ì •ê·œí™”):**
- ì €ì¥ ê³µê°„: +5MB (ë¬´ì‹œ ê°€ëŠ¥)
- ë°°ì¹˜ ì‘ì—…: CPU 5%, 5ë¶„ë§ˆë‹¤
- ê°œë°œ ì‹œê°„: 2ì¼
- ì¶”ê°€ ì¸í”„ë¼ ë¹„ìš©: ì—†ìŒ

**íš¨ê³¼:**
- ì„œë²„ ë¶€í•˜ **85% ê°ì†Œ** â†’ ìŠ¤ì¼€ì¼ ì•„ì›ƒ ë¶ˆí•„ìš”
- ì›” ì„œë²„ ë¹„ìš© **30ë§Œì› ì ˆê°**
- ì‚¬ìš©ì ì´íƒˆë¥  **20% ê°ì†Œ** (ì˜ˆìƒ)

---

### 4.3. íŠ¸ë ˆì´ë“œì˜¤í”„ ë¶„ì„

#### 4.3.1. ë°ì´í„° ì‹ ì„ ë„

- **ì‹¤ì‹œê°„ ë°ì´í„°** (ê°œì„  ì „, Phase 1): í•­ìƒ ìµœì‹  ë°ì´í„°
- **5ë¶„ ì§€ì—°** (Phase 2): ë¹„ì¦ˆë‹ˆìŠ¤ ìš”êµ¬ì‚¬í•­ ê²€í†  í•„ìš”

**ê²°ë¡ **: ì¸ê¸° ìƒí’ˆ ìˆœìœ„ëŠ” ì‹¤ì‹œê°„ì¼ í•„ìš”ê°€ ì—†ë‹¤ê³  íŒë‹¨. 5ë¶„ ì§€ì—°ì€ í—ˆìš© ê°€ëŠ¥.

#### 4.3.2. ì“°ê¸° ì„±ëŠ¥

| ì‘ì—… | ê°œì„  ì „ | Phase 1 (ì¸ë±ìŠ¤) | Phase 2 (ë¹„ì •ê·œí™”) |
|------|---------|-----------------|-------------------|
| INSERT | 10ms | 11ms (+10%) | 10ms (ë™ì¼) |
| UPDATE | 15ms | 16ms (+7%) | 15ms (ë™ì¼) |

**ê²°ë¡ **: ì¸ë±ìŠ¤ ì¶”ê°€ë¡œ ì¸í•œ ì“°ê¸° ì„±ëŠ¥ ì €í•˜ëŠ” ë¯¸ë¯¸í•¨ (10% ì´ë‚´).

#### 4.3.3. ë³µì¡ë„

| í•­ëª© | Phase 1 (ì¸ë±ìŠ¤) | Phase 2 (ë¹„ì •ê·œí™”) |
|------|-----------------|-------------------|
| êµ¬í˜„ ë³µì¡ë„ | ë‚®ìŒ | ë†’ìŒ (ë°°ì¹˜ ì‘ì—…) |
| ìœ ì§€ë³´ìˆ˜ | ì‰¬ì›€ | ì¤‘ê°„ (ë°°ì¹˜ ëª¨ë‹ˆí„°ë§) |
| ì¥ì•  ìœ„í—˜ | ë‚®ìŒ | ì¤‘ê°„ (ë°°ì¹˜ ì‹¤íŒ¨ ì‹œ) |

**ê²°ë¡ **: Phase 1ë¡œ ë¨¼ì € ê°œì„ í•˜ê³ , Phase 2ëŠ” ì¶©ë¶„í•œ í…ŒìŠ¤íŠ¸ í›„ ì ìš©.

---

### 4.4. ëª¨ë‹ˆí„°ë§ ê³„íš

#### 4.4.1. ì„±ëŠ¥ ì§€í‘œ

- **ì‘ë‹µ ì‹œê°„**: 95 percentile 10ms ì´ë‚´ ìœ ì§€
- **ì—ëŸ¬ìœ¨**: 0.1% ì´í•˜ ìœ ì§€
- **ì„œë²„ ë¶€í•˜**: CPU 30% ì´í•˜ ìœ ì§€

#### 4.4.2. ë°°ì¹˜ ì‘ì—… ëª¨ë‹ˆí„°ë§ (Phase 2)

- **ì‹¤í–‰ ì‹œê°„**: 5ì´ˆ ì´ë‚´ ì™„ë£Œ
- **ì‹¤íŒ¨ìœ¨**: 0% ìœ ì§€ (ì¬ì‹œë„ ë¡œì§ í•„ìš”)
- **ë°ì´í„° ì •í™•ì„±**: ìˆ˜ë™ ê²€ì¦ (ì£¼ 1íšŒ)

#### 4.4.3. ì•Œë¦¼ ì„¤ì •

- ì‘ë‹µ ì‹œê°„ > 50ms (Phase 1) ë˜ëŠ” > 10ms (Phase 2)
- ë°°ì¹˜ ì‘ì—… ì‹¤íŒ¨ ì‹œ ì¦‰ì‹œ ì•Œë¦¼
- ë°ì´í„° ë¶ˆì¼ì¹˜ ë°œê²¬ ì‹œ ì•Œë¦¼

---

## 5. ê²°ë¡ 

### 5.1. ìµœì¢… ê²°ì •

**Phase 1 (ì¸ë±ìŠ¤ ì¶”ê°€)**: ì¦‰ì‹œ ì ìš©
- ë³µí•© ì¸ë±ìŠ¤ 2ê°œ ì¶”ê°€
- ì‘ë‹µ ì‹œê°„: 500ms â†’ 50ms (90% ê°œì„ )
- êµ¬í˜„ ê¸°ê°„: 1ì¼

**Phase 2 (ë¹„ì •ê·œí™”)**: 2ì£¼ ë‚´ ì ìš©
- ì§‘ê³„ í…Œì´ë¸” ìƒì„± ë° ë°°ì¹˜ ì‘ì—… êµ¬í˜„
- ì‘ë‹µ ì‹œê°„: 50ms â†’ 5ms (90% ì¶”ê°€ ê°œì„ )
- êµ¬í˜„ ê¸°ê°„: 2ì¼ + í…ŒìŠ¤íŠ¸ 1ì£¼

**ìµœì¢… ëª©í‘œ ë‹¬ì„±**: 500ms â†’ 5ms (**99% ê°œì„ **)

---

### 5.2. í–¥í›„ ê°œì„  ê³¼ì œ

#### 5.2.1. ë‹¨ê¸° (1ê°œì›” ë‚´)
- [ ] Phase 1 ì ìš© ë° ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§
- [ ] Phase 2 ê°œë°œ ë° ìŠ¤í…Œì´ì§• í…ŒìŠ¤íŠ¸
- [ ] Phase 2 í”„ë¡œë•ì…˜ ë°°í¬

#### 5.2.2. ì¤‘ê¸° (3ê°œì›” ë‚´)
- [ ] ë°ì´í„° ì¦ê°€ ì¶”ì´ ëª¨ë‹ˆí„°ë§ (ì›” 10ë§Œ ê±´ â†’ ì›” 100ë§Œ ê±´ ëŒ€ë¹„)
- [ ] ìºì‹± ë„ì… ê²€í†  (Redis)
- [ ] ì¸ë±ìŠ¤ ì‚¬ìš©ë¥  ëª¨ë‹ˆí„°ë§ ë° ìµœì í™”

#### 5.2.3. ì¥ê¸° (6ê°œì›” ë‚´)
- [ ] íŒŒí‹°ì…”ë‹ ê³ ë ¤ (ì£¼ë¬¸ ë°ì´í„° 1ë…„ ì´ìƒ ëˆ„ì  ì‹œ)
- [ ] ì½ê¸° ì „ìš© Replica ë„ì… ê²€í† 
- [ ] ê¸°íƒ€ ì„±ëŠ¥ ë³‘ëª© ì§€ì  ì‹ë³„ ë° ê°œì„ 

---

### 5.3. ì°¸ê³  ìë£Œ

- [MySQL EXPLAIN ê³µì‹ ë¬¸ì„œ](https://dev.mysql.com/doc/refman/8.0/en/explain.html)
- [Use The Index, Luke!](https://use-the-index-luke.com/)
- [High Performance MySQL](https://www.oreilly.com/library/view/high-performance-mysql/9781492080503/)

---

### 5.4. ì²¨ë¶€ íŒŒì¼

- `explain-before.txt`: ê°œì„  ì „ EXPLAIN ê²°ê³¼
- `explain-after-phase1.txt`: Phase 1 EXPLAIN ê²°ê³¼
- `explain-after-phase2.txt`: Phase 2 EXPLAIN ê²°ê³¼
- `performance-test-results.xlsx`: ì„±ëŠ¥ í…ŒìŠ¤íŠ¸ ê²°ê³¼

---

**ì‘ì„± ì™„ë£Œì¼**: 2025-XX-XX
**ìŠ¹ì¸ì**: [íŒ€ ë¦¬ë” ì´ë¦„]
**ì ìš© ì˜ˆì •ì¼**: 2025-XX-XX
