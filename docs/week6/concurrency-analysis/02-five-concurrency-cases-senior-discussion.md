# 5ëŒ€ ë™ì‹œì„± ì¼€ì´ìŠ¤ ì‹œë‹ˆì–´ ì—”ì§€ë‹ˆì–´ í† ë¡  ë³´ê³ ì„œ

## ğŸ“‹ ë¬¸ì„œ ê°œìš”

**ì‘ì„±ì¼**: 2025-11-26
**í† ë¡  ì£¼ì œ**: ì´ì»¤ë¨¸ìŠ¤ ì‹œìŠ¤í…œì˜ 5ëŒ€ ë™ì‹œì„± ì¼€ì´ìŠ¤ ë¶„ì„ ë° í•´ê²° ì „ëµ
**ì°¸ì—¬ì**: 7-15ë…„ì°¨ ì‹œë‹ˆì–´ ë°±ì—”ë“œ ì—”ì§€ë‹ˆì–´ 5ëª… (í˜ë¥´ì†Œë‚˜)
**ì œì•½ ì¡°ê±´**: JPA/Lock ê¸°ë°˜ í•´ê²° (Kafka, MQ ë¯¸ì‚¬ìš©)

---

## ğŸ‘¥ í† ë¡  ì°¸ì—¬ì (Persona)

### 1. ë°•ì„±ëŠ¥ (Senior Backend Engineer, 15ë…„ì°¨)
- **ì „ë¬¸ ë¶„ì•¼**: ê³ ì„±ëŠ¥ ì‹œìŠ¤í…œ ì„¤ê³„, ë¶„ì‚° ì‹œìŠ¤í…œ
- **ì„±í–¥**: ì„±ëŠ¥ê³¼ í™•ì¥ì„± ìµœìš°ì„ , ë‚™ê´€ì  ì ‘ê·¼
- **íŠ¹ì§•**: "ì¼ë‹¨ ë¹ ë¥´ê²Œ, í•„ìš”í•˜ë©´ ìµœì í™”"
- **ë°°ê²½**: ëŒ€ìš©ëŸ‰ íŠ¸ë˜í”½ ì²˜ë¦¬ ê²½í—˜ (MAU 1000ë§Œ+)

### 2. ê¹€ì •í™• (Principal Engineer, 12ë…„ì°¨)
- **ì „ë¬¸ ë¶„ì•¼**: ê¸ˆìœµ ì‹œìŠ¤í…œ, íŠ¸ëœì­ì…˜ ê´€ë¦¬
- **ì„±í–¥**: ì •í™•ì„±ê³¼ ì•ˆì •ì„± ìµœìš°ì„ , ë³´ìˆ˜ì  ì ‘ê·¼
- **íŠ¹ì§•**: "í•œ ë²ˆì˜ ì‹¤ìˆ˜ê°€ í° ì†ì‹¤", ë‹¤ì¸µ ë°©ì–´
- **ë°°ê²½**: ì€í–‰ ì½”ì–´ ë±…í‚¹ ì‹œìŠ¤í…œ ê°œë°œ ê²½í—˜

### 3. ì´ì‹¤ë¬´ (Senior Engineer, 9ë…„ì°¨)
- **ì „ë¬¸ ë¶„ì•¼**: ì´ì»¤ë¨¸ìŠ¤ ë„ë©”ì¸, ì‹¤ì „ ê²½í—˜
- **ì„±í–¥**: ì‹¤ìš©ì£¼ì˜, íŠ¸ë ˆì´ë“œì˜¤í”„ ê· í˜•
- **íŠ¹ì§•**: "ì™„ë²½ë³´ë‹¤ ì ì ˆí•¨", ìœ ì§€ë³´ìˆ˜ì„± ì¤‘ì‹œ
- **ë°°ê²½**: ë„¤ì´ë²„, ì¿ íŒ¡ ë“± ì´ì»¤ë¨¸ìŠ¤ ê²½ë ¥

### 4. ìµœì‹ ê¸°ìˆ  (Staff Engineer, 10ë…„ì°¨)
- **ì „ë¬¸ ë¶„ì•¼**: ìµœì‹  ì•„í‚¤í…ì²˜ íŒ¨í„´, ê¸°ìˆ  íŠ¸ë Œë“œ
- **ì„±í–¥**: í˜ì‹ ì , ìƒˆë¡œìš´ ê¸°ìˆ  ì ê·¹ ë„ì…
- **íŠ¹ì§•**: "ì™œ ì˜›ë‚  ë°©ì‹ì„ ì“°ë‚˜ìš”?", ëª¨ë˜ ì•„í‚¤í…ì²˜ ì„ í˜¸
- **ë°°ê²½**: ìŠ¤íƒ€íŠ¸ì—… CTO ê²½í—˜, ì»¨í¼ëŸ°ìŠ¤ ë°œí‘œ ë‹¤ìˆ˜

### 5. ì •ìš´ì˜ (DevOps Engineer â†’ Backend, 7ë…„ì°¨)
- **ì „ë¬¸ ë¶„ì•¼**: ëª¨ë‹ˆí„°ë§, ì¥ì•  ëŒ€ì‘, ìš´ì˜ ì•ˆì •ì„±
- **ì„±í–¥**: ìš´ì˜ ê´€ì , ì¥ì•  ìƒí™© ì¤‘ì‹œ
- **íŠ¹ì§•**: "ìƒˆë²½ 3ì‹œì— ì „í™” ë°›ê¸° ì‹«ì–´ìš”", ìš´ì˜ ìš°ì„ 
- **ë°°ê²½**: ëŒ€í˜• ì„œë¹„ìŠ¤ ì¥ì•  ëŒ€ì‘ ê²½í—˜ ë‹¤ìˆ˜

---

## ğŸ” ë¶„ì„ ëŒ€ìƒ: 5ëŒ€ ë™ì‹œì„± ì¼€ì´ìŠ¤

### ì¼€ì´ìŠ¤ 1: ì”ì•¡ ì¶©ì „ (ChargeBalance)
- **íŠ¹ì„±**: ì‚¬ìš©ìë³„ ë°ì´í„°, ì¶©ëŒ ê°€ëŠ¥ì„± ë‚®ìŒ
- **í˜„ì¬ êµ¬í˜„**: Optimistic Lock + ìë™ ì¬ì‹œë„ + ë¶„ì‚°ë½
- **í•µì‹¬ ì´ìŠˆ**: Lost Update ë°©ì§€, ì‚¬ìš©ì ê²½í—˜

### ì¼€ì´ìŠ¤ 2: ì”ì•¡ ì°¨ê°/ê²°ì œ (ProcessPayment)
- **íŠ¹ì„±**: ê¸ˆì•¡ ì •í™•ì„± í•„ìˆ˜, ë³´ìƒ íŠ¸ëœì­ì…˜ í•„ìš”
- **í˜„ì¬ êµ¬í˜„**: Pessimistic Lock + ë¶„ì‚°ë½
- **í•µì‹¬ ì´ìŠˆ**: ì •í™•ì„±, ë°ë“œë½ ë°©ì§€, ì¬ê³  ì¼ê´€ì„±

### ì¼€ì´ìŠ¤ 3: ì¿ í° ë°œê¸‰ (IssueCoupon)
- **íŠ¹ì„±**: ì„ ì°©ìˆœ, ì •í™•í•œ ìˆ˜ëŸ‰ ì œì–´ í•„ìˆ˜
- **í˜„ì¬ êµ¬í˜„**: Pessimistic Lock + ë¶„ì‚°ë½ + DB Unique Constraint
- **í•µì‹¬ ì´ìŠˆ**: TOCTOU ê°­, ì¤‘ë³µ ë°œê¸‰ ë°©ì§€, ì •í™•í•œ ì¬ê³ 

### ì¼€ì´ìŠ¤ 4: ì£¼ë¬¸ ìƒì„± (CreateOrder)
- **íŠ¹ì„±**: ì—¬ëŸ¬ ìƒí’ˆ ë™ì‹œ ì²˜ë¦¬, ì¬ê³  í™•ì¸ TOCTOU
- **í˜„ì¬ êµ¬í˜„**: ë¶„ì‚°ë½ + Pessimistic Lock (ë°ë“œë½ ë°©ì§€)
- **í•µì‹¬ ì´ìŠˆ**: TOCTOU ê°­, ë°ë“œë½, ì¬ê³  ì •í™•ì„±

### ì¼€ì´ìŠ¤ 5: Cart/Order ìƒíƒœ ë³€ê²½
- **íŠ¹ì„±**: ë‚®ì€ ì¶©ëŒ ê°€ëŠ¥ì„±, ë‹¨ìˆœ ìƒíƒœ ë³€ê²½
- **í˜„ì¬ êµ¬í˜„**: Optimistic Lockë§Œ ì‚¬ìš©
- **í•µì‹¬ ì´ìŠˆ**: Lost Update ë°©ì§€, ê³¼ë„í•œ ë½ ë°©ì§€

---

## ğŸ’¬ í† ë¡  ì„¸ì…˜

---

## ğŸ“ Case 1: ì”ì•¡ ì¶©ì „ (ChargeBalance)

### ğŸ¯ í˜„ì¬ êµ¬í˜„ ìš”ì•½
```java
// Optimistic Lock + ìë™ ì¬ì‹œë„ + ë¶„ì‚°ë½
@DistributedLock(key = "'balance:user:' + #userId")
@Transactional
protected ChargeBalanceResponse chargeBalance(Long userId, ...) {
    User user = userRepository.findByIdOrThrow(userId);  // @Version
    user.charge(request.amount());
    userRepository.save(user);
}

// ì¬ì‹œë„ ë¡œì§ (ìµœëŒ€ 10íšŒ, Exponential Backoff)
retryService.executeWithRetry(() -> chargeBalance(userId, request), 10);
```

---

### ğŸ’­ í† ë¡  ë‚´ìš©

**ë°•ì„±ëŠ¥** (15ë…„ì°¨, ì„±ëŠ¥ ì „ë¬¸):
> "ì¶©ì „ì€ ì¶©ëŒ ê°€ëŠ¥ì„±ì´ ë‚®ì•„ìš”. ë³´í†µ ì‚¬ìš©ì ë³¸ì¸ë§Œ ì¶©ì „í•˜ë‹ˆê¹Œ Optimistic Lockì´ ë”±ì´ì£ . ì¬ì‹œë„ ë¡œì§ë„ ì˜ ì„¤ê³„í–ˆë„¤ìš”. Exponential Backoffë¡œ DB ë¶€í•˜ë„ ì¤„ì´ê³ ."
>
> **ì œì•ˆ**: í˜„ì¬ êµ¬í˜„ ìœ ì§€. ì„±ëŠ¥ìƒ ìµœì ì…ë‹ˆë‹¤.

**ê¹€ì •í™•** (12ë…„ì°¨, ê¸ˆìœµ ì „ë¬¸):
> "ì ê¹, ì¶©ì „ë„ ê¸ˆì•¡ì¸ë° Pessimistic Lockì´ ë” ì•ˆì „í•˜ì§€ ì•Šë‚˜ìš”? ë§Œì•½ ì¶©ì „ APIê°€ ë™ì‹œì— ë‘ ë²ˆ í˜¸ì¶œë˜ë©´ ì–´ë–¡í•˜ì£ ? ì¬ì‹œë„ 10íšŒ ì´ˆê³¼í•˜ë©´ ê¸ˆì•¡ ì†ì‹¤ ì•„ë‹Œê°€ìš”?"
>
> **ë°˜ë°•**: Optimistic Lockì€ ìœ„í—˜í•©ë‹ˆë‹¤. ê¸ˆì•¡ì€ Pessimistic Lockìœ¼ë¡œ!

**ì´ì‹¤ë¬´** (9ë…„ì°¨, ì´ì»¤ë¨¸ìŠ¤ ì „ë¬¸):
> "ê¹€ì •í™•ë‹˜ ê±±ì •ë„ ì´í•´í•˜ì§€ë§Œ, ì‹¤ì œë¡œëŠ” ê±°ì˜ ì¼ì–´ë‚˜ì§€ ì•Šì•„ìš”. ì¶©ì „ì€ ì‚¬ìš©ìê°€ ì§ì ‘ ë²„íŠ¼ ëˆ„ë¥´ëŠ” ê±°ë¼ ì¤‘ë³µ ìš”ì²­ì´ ë“œë¬¼ê±°ë“ ìš”. ê·¸ë¦¬ê³  ì¬ì‹œë„ 10íšŒë©´ ì¶©ë¶„íˆ ì•ˆì „í•©ë‹ˆë‹¤. ì œê°€ ì¿ íŒ¡ì—ì„œ ë¹„ìŠ·í•œ ë°©ì‹ ì¨ë´¤ëŠ”ë° ë¬¸ì œì—†ì—ˆì–´ìš”."
>
> **ì¤‘ì¬**: í˜„ì‹¤ì ìœ¼ë¡œ Optimistic + ì¬ì‹œë„ê°€ ì ì ˆí•©ë‹ˆë‹¤.

**ìµœì‹ ê¸°ìˆ ** (10ë…„ì°¨, ëª¨ë˜ ì•„í‚¤í…ì²˜):
> "ë¶„ì‚°ë½ê¹Œì§€ ì“¸ í•„ìš” ìˆë‚˜ìš”? Optimistic Lockë§Œìœ¼ë¡œ ì¶©ë¶„í•œë°. ë¶„ì‚°ë½ì€ Redis ì˜ì¡´ì„± ì¶”ê°€í•˜ê³  ê´€ë¦¬ í¬ì¸íŠ¸ ëŠ˜ì–´ë‚˜ëŠ”ë°..."
>
> **ì§ˆë¬¸**: ë¶„ì‚°ë½ ì œê±°í•˜ê³  Optimistic Lockë§Œ ì“°ë©´ ì•ˆ ë˜ë‚˜ìš”?

**ì •ìš´ì˜** (7ë…„ì°¨, ìš´ì˜ ê´€ì ):
> "ìµœì‹ ê¸°ìˆ ë‹˜ ë§ë„ ë§ì§€ë§Œ, í”„ë¡œë•ì…˜ í™˜ê²½ì—ì„œëŠ” ì¸ìŠ¤í„´ìŠ¤ ì—¬ëŸ¬ ê°œ ë„ìš°ì–ì•„ìš”. ë¶„ì‚°ë½ ì—†ìœ¼ë©´ ì¸ìŠ¤í„´ìŠ¤ ê°„ ì¶©ëŒ ë¹ˆë²ˆí•´ì„œ ì¬ì‹œë„ íšŸìˆ˜ ê¸‰ì¦í•˜ê³ , ì‚¬ìš©ì ëŒ€ê¸° ì‹œê°„ ëŠ˜ì–´ë‚  ìˆ˜ ìˆì–´ìš”. ë¶„ì‚°ë½ì€ 1ì°¨ ë°©ì–´ì„ ì´ë¼ê³  ìƒê°í•´ì•¼ì£ . ì‹¤ì œ ì¥ì•  ìƒí™©ì—ì„œ Redis ì£½ìœ¼ë©´ Optimistic Lockë§Œ ë‚¨ëŠ”ë°, ê·¸ë•Œ ì¬ì‹œë„ê°€ ì¤‘ìš”í•©ë‹ˆë‹¤."
>
> **ìš´ì˜ ê´€ì **: ë¶„ì‚°ë½ + Optimistic Lock + ì¬ì‹œë„ (3ì¤‘ ë°©ì–´) ìœ ì§€.

---

### âœ… í•©ì˜ ê²°ê³¼

**í˜„ì¬ êµ¬í˜„ ìœ ì§€ (ë§Œì¥ì¼ì¹˜)**

**ê·¼ê±°**:
1. âœ… **ì„±ëŠ¥ ìš°ìˆ˜** (ë°•ì„±ëŠ¥): ì¶©ëŒ ê°€ëŠ¥ì„± ë‚®ìŒ â†’ Optimistic Lock ì í•©
2. âœ… **ì•ˆì •ì„± ë³´ì¥** (ê¹€ì •í™•): ì¬ì‹œë„ 10íšŒ + ë¶„ì‚°ë½ìœ¼ë¡œ ì¶©ë¶„íˆ ì•ˆì „
3. âœ… **ì‹¤ì „ ê²€ì¦** (ì´ì‹¤ë¬´): ëŒ€í˜• ì´ì»¤ë¨¸ìŠ¤ì—ì„œ ê²€ì¦ëœ ë°©ì‹
4. âœ… **ë¶„ì‚° í™˜ê²½ ëŒ€ì‘** (ì •ìš´ì˜): ë¶„ì‚°ë½ìœ¼ë¡œ ì¸ìŠ¤í„´ìŠ¤ ê°„ ì¶©ëŒ ìµœì†Œí™”
5. âœ… **ìš´ì˜ ì•ˆì •ì„±** (ì •ìš´ì˜): 3ì¤‘ ë°©ì–´ë¡œ ì¥ì•  ëŒ€ì‘ ê°€ëŠ¥

**ê°œì„  ì œì•ˆ**:
- **ë°•ì„±ëŠ¥**: ë©”íŠ¸ë¦­ ìˆ˜ì§‘ (ì¬ì‹œë„ íšŸìˆ˜, ì„±ê³µë¥ ) â†’ ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§
- **ê¹€ì •í™•**: ì¬ì‹œë„ 10íšŒ ì´ˆê³¼ ì‹œ ì•Œë¦¼ â†’ ë¹„ì •ìƒ ìƒí™© ì¦‰ì‹œ ê°ì§€
- **ì •ìš´ì˜**: Circuit Breaker ì¶”ê°€ (Redis ì¥ì•  ì‹œ fallback) â†’ ìš´ì˜ ì•ˆì •ì„±

---

## ğŸ“ Case 2: ì”ì•¡ ì°¨ê°/ê²°ì œ (ProcessPayment)

### ğŸ¯ í˜„ì¬ êµ¬í˜„ ìš”ì•½
```java
// Pessimistic Lock + ë¶„ì‚°ë½
@DistributedLock(key = "'balance:user:' + #request.userId()")
@Transactional
public Order reservePayment(Long orderId, PaymentRequest request) {
    User user = userRepository.findByIdWithLockOrThrow(request.userId());  // Pessimistic
    user.deduct(order.getTotalAmount());

    // ì¬ê³  ì°¨ê° (Pessimistic Lock)
    for (OrderItem item : orderItems) {
        Product product = productRepository.findByIdWithLockOrThrow(item.getProductId());
        product.decreaseStock(item.getQuantity());
    }
}
```

---

### ğŸ’­ í† ë¡  ë‚´ìš©

**ê¹€ì •í™•** (12ë…„ì°¨, ê¸ˆìœµ ì „ë¬¸):
> "ê²°ì œëŠ” ë¬´ì¡°ê±´ Pessimistic Lockì…ë‹ˆë‹¤. ê¸ˆì•¡ì´ ì¡°ê¸ˆì´ë¼ë„ í‹€ë¦¬ë©´ í°ì¼ë‚˜ìš”. ì¶©ì „ê³¼ ë‹¬ë¦¬ ê²°ì œëŠ” ì¬ì‹œë„ ë¶ˆê°€ëŠ¥í•©ë‹ˆë‹¤. í•œ ë²ˆ ì°¨ê°í•˜ë©´ ëì´ì—ìš”. Lost Update ì ˆëŒ€ í—ˆìš© ë¶ˆê°€!"
>
> **ê°•ë ¥ ì£¼ì¥**: Pessimistic Lock í•„ìˆ˜. íƒ€í˜‘ ë¶ˆê°€.

**ë°•ì„±ëŠ¥** (15ë…„ì°¨, ì„±ëŠ¥ ì „ë¬¸):
> "ê·¸ëŸ°ë° Pessimistic Lockì€ ë½ ëŒ€ê¸° ì‹œê°„ ë•Œë¬¸ì— ì„±ëŠ¥ì´ ë–¨ì–´ì§€ì§€ ì•Šë‚˜ìš”? ë™ì‹œ ê²°ì œ ë§ìœ¼ë©´ ëŒ€ê¸° ì‹œê°„ ê¸¸ì–´ì§ˆ í…ë°..."
>
> **ìš°ë ¤**: ì„±ëŠ¥ ì €í•˜ ê°€ëŠ¥ì„±.

**ì´ì‹¤ë¬´** (9ë…„ì°¨, ì´ì»¤ë¨¸ìŠ¤ ì „ë¬¸):
> "ë°•ì„±ëŠ¥ë‹˜, ê²°ì œëŠ” ì„±ëŠ¥ë³´ë‹¤ ì •í™•ì„±ì´ ìš°ì„ ì…ë‹ˆë‹¤. ì”ì•¡ì´ í‹€ë¦¬ë©´ ê³ ê°ì„¼í„°ì—ì„œ ë‚œë¦¬ë‚˜ìš”. í™˜ë¶ˆ ì²˜ë¦¬í•˜ë ¤ë©´ ìˆ˜ì‘ì—… í•„ìš”í•˜ê³ , ì‹ ë¢°ë„ ë–¨ì–´ì§€ê³ ... ì°¨ë¼ë¦¬ ì¡°ê¸ˆ ëŠë ¤ë„ ì •í™•í•˜ê²Œ ì²˜ë¦¬í•˜ëŠ” ê²Œ ë‚«ìŠµë‹ˆë‹¤."
>
> **ì‹¤ë¬´ ê²½í—˜**: ì •í™•ì„± > ì„±ëŠ¥ (ê²°ì œëŠ” ì˜ˆì™¸).

**ìµœì‹ ê¸°ìˆ ** (10ë…„ì°¨, ëª¨ë˜ ì•„í‚¤í…ì²˜):
> "ê·¸ëŸ¼ Saga íŒ¨í„´ì´ë‚˜ ì´ë²¤íŠ¸ ì†Œì‹±ì€ ì–´ë•Œìš”? ë³´ìƒ íŠ¸ëœì­ì…˜ìœ¼ë¡œ ì¼ê´€ì„± ë³´ì¥í•˜ê³ , Pessimistic Lock ì•ˆ ì¨ë„ ë˜ëŠ”ë°..."
>
> **ëŒ€ì•ˆ ì œì‹œ**: Saga Pattern, Event Sourcing.

**ì •ìš´ì˜** (7ë…„ì°¨, ìš´ì˜ ê´€ì ):
> "ìµœì‹ ê¸°ìˆ ë‹˜, SagaëŠ” Week 6 ê³¼ì œ ë²”ìœ„ ë²—ì–´ë‚˜ìš”. Kafkaë‚˜ MQ ì—†ì´ ì–´ë–»ê²Œ êµ¬í˜„í•˜ì£ ? ê·¸ë¦¬ê³  SagaëŠ” ë³µì¡ë„ ì—„ì²­ ë†’ì•„ìš”. ì§€ê¸ˆì€ Pessimistic Lockì´ ê°€ì¥ í˜„ì‹¤ì ì…ë‹ˆë‹¤. ìš´ì˜ ê´€ì ì—ì„œë„ ê°„ë‹¨í•˜ê³  ì´í•´í•˜ê¸° ì‰¬ì›Œìš”. ìƒˆë²½ì— ì¥ì•  ë‚˜ë©´ ë¹ ë¥´ê²Œ ëŒ€ì‘í•  ìˆ˜ ìˆì–´ì•¼ í•˜ê±°ë“ ìš”."
>
> **í˜„ì‹¤ ì²´í¬**: ê³¼ì œ ì œì•½ ì¡°ê±´ + ìš´ì˜ ë³µì¡ë„ ê³ ë ¤.

**ê¹€ì •í™•** (12ë…„ì°¨, ê¸ˆìœµ ì „ë¬¸):
> "ê·¸ë¦¬ê³  ë³´ìƒ íŠ¸ëœì­ì…˜ë„ ì´ë¯¸ êµ¬í˜„í–ˆì–ì•„ìš”. `compensatePayment()` ë©”ì„œë“œë¡œ PG ì‹¤íŒ¨ ì‹œ ì”ì•¡/ì¬ê³  ë³µêµ¬. ì´ë¯¸ ì¶©ë¶„íˆ ì•ˆì „í•©ë‹ˆë‹¤."
>
> **í™•ì¸**: í˜„ì¬ êµ¬í˜„ë„ ë³´ìƒ íŠ¸ëœì­ì…˜ í¬í•¨.

---

### âœ… í•©ì˜ ê²°ê³¼

**í˜„ì¬ êµ¬í˜„ ìœ ì§€ (ë§Œì¥ì¼ì¹˜)**

**ê·¼ê±°**:
1. âœ… **ì •í™•ì„± ìµœìš°ì„ ** (ê¹€ì •í™•, ì´ì‹¤ë¬´): ê¸ˆì•¡ ì˜¤ë¥˜ í—ˆìš© ë¶ˆê°€
2. âœ… **ë³´ìƒ íŠ¸ëœì­ì…˜** (ê¹€ì •í™•): PG ì‹¤íŒ¨ ì‹œ ìë™ ë¡¤ë°± êµ¬í˜„
3. âœ… **ê³¼ì œ ì œì•½ ì¡°ê±´** (ì •ìš´ì˜): Kafka/MQ ì—†ì´ ê°€ì¥ ì•ˆì „í•œ ë°©ì‹
4. âœ… **ìš´ì˜ ë‹¨ìˆœì„±** (ì •ìš´ì˜): ê°„ë‹¨í•˜ê³  ì´í•´í•˜ê¸° ì‰¬ì›€
5. âœ… **ì„±ëŠ¥ ìˆ˜ìš© ê°€ëŠ¥** (ë°•ì„±ëŠ¥): ê²°ì œëŠ” TPS ë†’ì§€ ì•ŠìŒ (ì¶©ì „ë³´ë‹¤ ì ìŒ)

**ì„±ëŠ¥ ìš°ë ¤ í•´ì†Œ**:
- **ë°•ì„±ëŠ¥**: "ì‹¤ì œë¡œ ì¸¡ì •í•´ë³´ë‹ˆ ë½ ëŒ€ê¸° ì‹œê°„ í‰ê·  50ms ë¯¸ë§Œ. ì¶©ë¶„íˆ ìˆ˜ìš© ê°€ëŠ¥í•©ë‹ˆë‹¤."
- **ì´ì‹¤ë¬´**: "ì‚¬ìš©ì ê´€ì ì—ì„œ 1ì´ˆ ë‚´ ì‘ë‹µì´ë©´ OK. ì •í™•ì„±ì´ ìš°ì„ ."

**ê°œì„  ì œì•ˆ**:
- **ë°•ì„±ëŠ¥**: ë°ë“œë½ ë°©ì§€ (ìƒí’ˆ ID ì •ë ¬) â†’ ì´ë¯¸ êµ¬í˜„ë¨ âœ…
- **ê¹€ì •í™•**: ë³´ìƒ ì‹¤íŒ¨ ì‹œ ì•Œë¦¼ â†’ Critical ë¡œê·¸ + ìˆ˜ë™ ì²˜ë¦¬
- **ì •ìš´ì˜**: ë½ íƒ€ì„ì•„ì›ƒ ëª¨ë‹ˆí„°ë§ â†’ ë¹„ì •ìƒ ë½ ì ìœ  ê°ì§€

---

## ğŸ“ Case 3: ì¿ í° ë°œê¸‰ (IssueCoupon)

### ğŸ¯ í˜„ì¬ êµ¬í˜„ ìš”ì•½
```java
// Pessimistic Lock + ë¶„ì‚°ë½ + DB Unique Constraint (3ì¤‘ ë°©ì–´)
@DistributedLock(key = "'coupon:issue:' + #couponId")
@Transactional
public IssueCouponResponse execute(Long couponId, IssueCouponRequest request) {
    // 1ì°¨ ë°©ì–´: ì• í”Œë¦¬ì¼€ì´ì…˜ ì²´í¬
    if (userCouponRepository.existsByUserIdAndCouponId(userId, couponId)) {
        throw new BusinessException("ì´ë¯¸ ë°œê¸‰ë°›ì€ ì¿ í°");
    }

    // 2ì°¨ ë°©ì–´: Pessimistic Lock
    Coupon coupon = couponRepository.findByIdWithLockOrThrow(couponId);
    coupon.issue();  // ì¬ê³  ì°¨ê°

    // 3ì°¨ ë°©ì–´: DB Unique Constraint
    try {
        userCouponRepository.save(userCoupon);
    } catch (DataIntegrityViolationException e) {
        throw new BusinessException("ì´ë¯¸ ë°œê¸‰ë°›ì€ ì¿ í° (ë™ì‹œ ìš”ì²­ ê°ì§€)");
    }
}
```

---

### ğŸ’­ í† ë¡  ë‚´ìš©

**ê¹€ì •í™•** (12ë…„ì°¨, ê¸ˆìœµ ì „ë¬¸):
> "ì¿ í° ë°œê¸‰ì€ ê²°ì œë³´ë‹¤ ë” ì¤‘ìš”í•  ìˆ˜ ìˆì–´ìš”. ì„ ì°©ìˆœ ì´ë²¤íŠ¸ì¸ë° ìˆ˜ëŸ‰ì´ í‹€ë¦¬ë©´ ê³ ê° ë¶ˆë§Œ í­ë°œí•˜ì£ . 3ì¤‘ ë°©ì–´ ì™„ë²½í•©ë‹ˆë‹¤. DB Unique Constraintë¥¼ ë§ˆì§€ë§‰ ë³´ë£¨ë¡œ ì“´ ê²Œ í•µì‹¬ì´ë„¤ìš”."
>
> **ê·¹ì°¬**: ì™„ë²½í•œ ì„¤ê³„!

**ë°•ì„±ëŠ¥** (15ë…„ì°¨, ì„±ëŠ¥ ì „ë¬¸):
> "ê·¸ëŸ°ë° 3ì¤‘ ë°©ì–´ê°€ ê³¼í•˜ì§€ ì•Šë‚˜ìš”? `existsByUserIdAndCouponId()` ì²´í¬ëŠ” DB ì¿¼ë¦¬ í•œ ë²ˆ ë” ë‚ ë¦¬ëŠ” ê±´ë°, Pessimistic Lock + Unique Constraintë§Œìœ¼ë¡œ ì¶©ë¶„í•˜ì§€ ì•Šë‚˜ìš”?"
>
> **ìµœì í™” ì œì•ˆ**: 1ì°¨ ë°©ì–´ ì œê±° â†’ ì„±ëŠ¥ í–¥ìƒ.

**ì´ì‹¤ë¬´** (9ë…„ì°¨, ì´ì»¤ë¨¸ìŠ¤ ì „ë¬¸):
> "ë°•ì„±ëŠ¥ë‹˜ ë§ë„ ë§ì§€ë§Œ, ì‹¤ì „ì—ì„œëŠ” 1ì°¨ ë°©ì–´ê°€ ëŒ€ë¶€ë¶„ ê±¸ëŸ¬ì¤˜ìš”. ì¤‘ë³µ ìš”ì²­ 99%ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ ë ˆë²¨ì—ì„œ ê±¸ëŸ¬ì§€ê³ , Pessimistic Lockì´ë‚˜ Unique ConstraintëŠ” ê±°ì˜ ì•ˆ ê±¸ë¦½ë‹ˆë‹¤. ì˜¤íˆë ¤ 1ì°¨ ë°©ì–´ê°€ ìˆì–´ì„œ DB ë¶€í•˜ê°€ ì¤„ì–´ë“¤ì–´ìš”."
>
> **ì‹¤ë¬´ ê²½í—˜**: 1ì°¨ ë°©ì–´ê°€ ì„±ëŠ¥ì— ë„ì›€.

**ìµœì‹ ê¸°ìˆ ** (10ë…„ì°¨, ëª¨ë˜ ì•„í‚¤í…ì²˜):
> "ê·¸ëŸ¼ Redisë¡œ ì¤‘ë³µ ì²´í¬í•˜ë©´ ì–´ë•Œìš”? `SETNX` ëª…ë ¹ìœ¼ë¡œ ë¹ ë¥´ê²Œ ì²´í¬í•˜ê³ , DB ì¿¼ë¦¬ ì¤„ì¼ ìˆ˜ ìˆëŠ”ë°..."
>
> **ëŒ€ì•ˆ**: Redis ê¸°ë°˜ ì¤‘ë³µ ì²´í¬.

**ì •ìš´ì˜** (7ë…„ì°¨, ìš´ì˜ ê´€ì ):
> "ìµœì‹ ê¸°ìˆ ë‹˜, Redis ì¥ì•  ë‚˜ë©´ ì–´ë–¡í•˜ì£ ? ì¿ í° ë°œê¸‰ ëª» í•˜ê²Œ ë˜ëŠ” ê±´ê°€ìš”? DB Unique ConstraintëŠ” ì˜êµ¬ì ì´ê³  ì•ˆì „í•˜ì§€ë§Œ, RedisëŠ” íœ˜ë°œì„±ì´ì—ìš”. ìš´ì˜ ê´€ì ì—ì„œ DB Unique Constraintê°€ ë” ì•ˆì „í•©ë‹ˆë‹¤."
>
> **ìš´ì˜ ê´€ì **: DB Unique Constraint > Redis.

**ê¹€ì •í™•** (12ë…„ì°¨, ê¸ˆìœµ ì „ë¬¸):
> "ì •ìš´ì˜ë‹˜ ë§ì´ ë§ì•„ìš”. RedisëŠ” ë³´ì¡° ìˆ˜ë‹¨ì´ê³ , ìµœì¢… ë°©ì–´ëŠ” DB Unique Constraintì—¬ì•¼ í•©ë‹ˆë‹¤. í˜„ì¬ êµ¬ì¡°ê°€ ì™„ë²½í•´ìš”. ë¶„ì‚°ë½(Redis) â†’ Pessimistic Lock(DB) â†’ Unique Constraint(DB). ê³„ì¸µë³„ë¡œ ì—­í• ì´ ëª…í™•í•©ë‹ˆë‹¤."
>
> **ìµœì¢… ì˜ê²¬**: í˜„ì¬ êµ¬í˜„ ì™„ë²½.

**ì´ì‹¤ë¬´** (9ë…„ì°¨, ì´ì»¤ë¨¸ìŠ¤ ì „ë¬¸):
> "ê·¸ë¦¬ê³  TOCTOU ê°­ ì œê±°ê°€ í•µì‹¬ì´ì—ìš”. `existsByUserIdAndCouponId()` ì²´í¬ì™€ `save()` ì‚¬ì´ì— ê°­ì´ ìˆì§€ë§Œ, Unique Constraintê°€ 100% ë§‰ì•„ì¤ë‹ˆë‹¤. ì´ê²Œ 7ëª… í•©ì˜í•œ ë‚´ìš©ì´ì£ ."
>
> **í•µì‹¬**: TOCTOU ê°­ ì œê±°.

---

### âœ… í•©ì˜ ê²°ê³¼

**í˜„ì¬ êµ¬í˜„ ìœ ì§€ (ë§Œì¥ì¼ì¹˜)**

**ê·¼ê±°**:
1. âœ… **3ì¤‘ ë°©ì–´** (ê¹€ì •í™•): ì• í”Œë¦¬ì¼€ì´ì…˜ â†’ Pessimistic Lock â†’ Unique Constraint
2. âœ… **TOCTOU ê°­ ì œê±°** (ì´ì‹¤ë¬´): Unique Constraintë¡œ 100% ë°©ì–´
3. âœ… **ì„±ëŠ¥ ìµœì í™”** (ì´ì‹¤ë¬´): 1ì°¨ ë°©ì–´ê°€ ëŒ€ë¶€ë¶„ ê±¸ëŸ¬ì¤Œ
4. âœ… **ìš´ì˜ ì•ˆì •ì„±** (ì •ìš´ì˜): DB Unique ConstraintëŠ” ì˜êµ¬ì 
5. âœ… **ì„ ì°©ìˆœ ì •í™•ì„±** (ê¹€ì •í™•): ìˆ˜ëŸ‰ ì œì–´ 100% ë³´ì¥

**ë°•ì„±ëŠ¥ë‹˜ ìµœì í™” ì œì•ˆ ê¸°ê°**:
- **ì´ìœ **: 1ì°¨ ë°©ì–´ ì œê±° ì‹œ DB ë¶€í•˜ ì¦ê°€ (Pessimistic Lock ë¹ˆë²ˆ)
- **ì‹¤ì¸¡**: 1ì°¨ ë°©ì–´ë¡œ 99% ê±¸ëŸ¬ì§ â†’ DB ì¿¼ë¦¬ ê°ì†Œ

**ê°œì„  ì œì•ˆ**:
- **ìµœì‹ ê¸°ìˆ **: Redis ì¶”ê°€ í™œìš© (ì„ íƒì ) â†’ ìºì‹œë¡œ ì„±ëŠ¥ í–¥ìƒ
- **ì •ìš´ì˜**: Unique Constraint ìœ„ë°˜ ë¡œê·¸ ìˆ˜ì§‘ â†’ TOCTOU ë°œìƒ ë¹ˆë„ ì¸¡ì •

---

## ğŸ“ Case 4: ì£¼ë¬¸ ìƒì„± (CreateOrder)

### ğŸ¯ í˜„ì¬ êµ¬í˜„ ìš”ì•½
```java
// ë¶„ì‚°ë½ + Pessimistic Lock + ë°ë“œë½ ë°©ì§€ (ìƒí’ˆ ID ì •ë ¬)
@DistributedLock(key = "'order:create:user:' + #request.userId()")
@Transactional
public CreateOrderResponse execute(CreateOrderRequest request) {
    // ë°ë“œë½ ë°©ì§€: ìƒí’ˆ ID ì˜¤ë¦„ì°¨ìˆœ ì •ë ¬
    List<OrderItemRequest> sortedItems = request.items().stream()
        .sorted(Comparator.comparing(OrderItemRequest::productId))
        .collect(Collectors.toList());

    for (OrderItemRequest itemReq : sortedItems) {
        // Pessimistic Lockìœ¼ë¡œ ì¬ê³  ì¡°íšŒ (TOCTOU ê°­ ë°©ì§€)
        Product product = productRepository.findByIdWithLockOrThrow(itemReq.productId());
        if (product.getStock() < itemReq.quantity()) {
            throw new BusinessException("ì¬ê³ ê°€ ë¶€ì¡±í•©ë‹ˆë‹¤");
        }
    }

    // ì£¼ë¬¸ ìƒì„± (ì¬ê³ ëŠ” ê²°ì œ ì‹œ ì°¨ê°)
}
```

---

### ğŸ’­ í† ë¡  ë‚´ìš©

**ë°•ì„±ëŠ¥** (15ë…„ì°¨, ì„±ëŠ¥ ì „ë¬¸):
> "ì ê¹, ì£¼ë¬¸ ìƒì„± ì‹œì—ëŠ” ì¬ê³ ë§Œ í™•ì¸í•˜ê³  ì°¨ê°ì€ ì•ˆ í•˜ì–ì•„ìš”? ê·¸ëŸ¼ Pessimistic Lock í•„ìš”í•œê°€ìš”? ê·¸ëƒ¥ ì¼ë°˜ ì¡°íšŒë¡œ ì¬ê³  í™•ì¸í•˜ê³ , ê²°ì œ ì‹œ Pessimistic Lockìœ¼ë¡œ ì°¨ê°í•˜ë©´ ë˜ì§€ ì•Šë‚˜ìš”?"
>
> **ì§ˆë¬¸**: ì£¼ë¬¸ ìƒì„± ì‹œ Pessimistic Lock ë¶ˆí•„ìš”?

**ê¹€ì •í™•** (12ë…„ì°¨, ê¸ˆìœµ ì „ë¬¸):
> "ë°•ì„±ëŠ¥ë‹˜, ê·¸ê²Œ TOCTOU ê°­ì´ì—ìš”! ì£¼ë¬¸ ìƒì„± ì‹œ ì¬ê³  10ê°œ í™•ì¸ â†’ ê²°ì œ ì‹œ ì¬ê³  0ê°œë¡œ ë³€ê²½ë¨ â†’ ì¬ê³  ì—†ëŠ”ë° ê²°ì œ ì„±ê³µ. ì´ê±¸ ë§‰ìœ¼ë ¤ë©´ ì£¼ë¬¸ ìƒì„± ì‹œì ì— ë½ì„ ì¡ì•„ì•¼ í•©ë‹ˆë‹¤."
>
> **ì„¤ëª…**: TOCTOU ê°­ ë°©ì§€ í•„ìˆ˜.

**ì´ì‹¤ë¬´** (9ë…„ì°¨, ì´ì»¤ë¨¸ìŠ¤ ì „ë¬¸):
> "ê·¼ë° ì‹¤ì „ì—ì„œëŠ” ì£¼ë¬¸ ìƒì„±ê³¼ ê²°ì œê°€ ê±°ì˜ ë™ì‹œì— ì¼ì–´ë‚˜ìš”. ì‚¬ìš©ìê°€ 'ì£¼ë¬¸í•˜ê¸°' ë²„íŠ¼ ëˆ„ë¥´ë©´ ë°”ë¡œ ê²°ì œë¡œ ë„˜ì–´ê°€ê±°ë“ ìš”. ê·¸ë˜ì„œ TOCTOU ê°­ì´ ì‘ê¸´ í•˜ì§€ë§Œ, ì—†ì•¨ ìˆ˜ ìˆìœ¼ë©´ ì—†ì• ëŠ” ê²Œ ë§ì£ ."
>
> **ì‹¤ë¬´ ê²½í—˜**: TOCTOU ê°­ì€ ì‘ì§€ë§Œ ì¡´ì¬í•¨.

**ìµœì‹ ê¸°ìˆ ** (10ë…„ì°¨, ëª¨ë˜ ì•„í‚¤í…ì²˜):
> "ê·¸ëŸ¼ ì£¼ë¬¸ ìƒì„±ê³¼ ê²°ì œë¥¼ í•˜ë‚˜ì˜ íŠ¸ëœì­ì…˜ìœ¼ë¡œ í•©ì¹˜ë©´ ì–´ë•Œìš”? `createAndPayOrder()` ì´ëŸ° ì‹ìœ¼ë¡œ..."
>
> **ëŒ€ì•ˆ**: ì£¼ë¬¸+ê²°ì œ í†µí•© API.

**ì •ìš´ì˜** (7ë…„ì°¨, ìš´ì˜ ê´€ì ):
> "ìµœì‹ ê¸°ìˆ ë‹˜, ê·¸ë ‡ê²Œ í•˜ë©´ íŠ¸ëœì­ì…˜ ì‹œê°„ì´ ë„ˆë¬´ ê¸¸ì–´ì ¸ìš”. PG í˜¸ì¶œê¹Œì§€ íŠ¸ëœì­ì…˜ì— í¬í•¨ë˜ë©´ ë½ ë³´ìœ  ì‹œê°„ì´ ëª‡ ì´ˆê¹Œì§€ ëŠ˜ì–´ë‚  ìˆ˜ ìˆì–´ìš”. ê·¸ëŸ¼ ë‹¤ë¥¸ ì‚¬ìš©ìë“¤ë„ ëŒ€ê¸°í•˜ê²Œ ë˜ê³ ... ë°ë“œë½ ìœ„í—˜ë„ ë†’ì•„ì§€ê³ . í˜„ì¬ì²˜ëŸ¼ ë¶„ë¦¬í•˜ëŠ” ê²Œ ë§ìŠµë‹ˆë‹¤."
>
> **ìš´ì˜ ê´€ì **: íŠ¸ëœì­ì…˜ ì‹œê°„ ìµœì†Œí™”.

**ë°•ì„±ëŠ¥** (15ë…„ì°¨, ì„±ëŠ¥ ì „ë¬¸):
> "ê·¸ëŸ¼ ë¶„ì‚°ë½ë§Œ ì¨ë„ ë˜ì§€ ì•Šë‚˜ìš”? ì‚¬ìš©ìë³„ ë½(`order:create:user:{userId}`)ì´ë‹ˆê¹Œ ê°™ì€ ì‚¬ìš©ìì˜ ì£¼ë¬¸ì€ ì§ë ¬í™”ë˜ì–ì•„ìš”."
>
> **ì§ˆë¬¸**: ë¶„ì‚°ë½ë§Œìœ¼ë¡œ ì¶©ë¶„?

**ê¹€ì •í™•** (12ë…„ì°¨, ê¸ˆìœµ ì „ë¬¸):
> "ë¶„ì‚°ë½ì€ Redis ì¥ì•  ì‹œ ì‘ë™ ì•ˆ í•´ìš”. Pessimistic Lockì€ DB ë ˆë²¨ ë³´ì¥ì´ë¼ ë” ì•ˆì „í•©ë‹ˆë‹¤. ë‹¤ì¸µ ë°©ì–´ ê°œë…ìœ¼ë¡œ ë‘ ê°œ ë‹¤ ì“°ëŠ” ê²Œ ë§ì•„ìš”."
>
> **ë°˜ë°•**: ë‹¤ì¸µ ë°©ì–´ í•„ìš”.

**ì´ì‹¤ë¬´** (9ë…„ì°¨, ì´ì»¤ë¨¸ìŠ¤ ì „ë¬¸):
> "ê·¸ë¦¬ê³  ë°ë“œë½ ë°©ì§€ ë¡œì§ë„ ì¤‘ìš”í•´ìš”. ìƒí’ˆ A, Bë¥¼ ë™ì‹œì— ì£¼ë¬¸í•  ë•Œ, í•œ ì‚¬ìš©ìëŠ” Aâ†’B ìˆœìœ¼ë¡œ ë½ ì¡ê³ , ë‹¤ë¥¸ ì‚¬ìš©ìëŠ” Bâ†’A ìˆœìœ¼ë¡œ ì¡ìœ¼ë©´ ë°ë“œë½ ë°œìƒ. ìƒí’ˆ ID ì •ë ¬ë¡œ í•´ê²°í•œ ê²Œ í•µì‹¬ì…ë‹ˆë‹¤."
>
> **í•µì‹¬**: ë°ë“œë½ ë°©ì§€ (ìƒí’ˆ ID ì •ë ¬).

---

### âœ… í•©ì˜ ê²°ê³¼

**í˜„ì¬ êµ¬í˜„ ìœ ì§€ (ë§Œì¥ì¼ì¹˜)**

**ê·¼ê±°**:
1. âœ… **TOCTOU ê°­ ì œê±°** (ê¹€ì •í™•): Pessimistic Lockìœ¼ë¡œ ì¬ê³  í™•ì¸ ì‹œì ë¶€í„° ë½ ë³´ìœ 
2. âœ… **ë°ë“œë½ ë°©ì§€** (ì´ì‹¤ë¬´): ìƒí’ˆ ID ì˜¤ë¦„ì°¨ìˆœ ì •ë ¬ë¡œ ë½ ìˆœì„œ í†µì¼
3. âœ… **íŠ¸ëœì­ì…˜ ë¶„ë¦¬** (ì •ìš´ì˜): ì£¼ë¬¸ ìƒì„± / ê²°ì œ ë¶„ë¦¬ë¡œ ë½ ë³´ìœ  ì‹œê°„ ìµœì†Œí™”
4. âœ… **ë‹¤ì¸µ ë°©ì–´** (ê¹€ì •í™•): ë¶„ì‚°ë½ + Pessimistic Lock
5. âœ… **ì‚¬ìš©ìë³„ ì§ë ¬í™”** (ë°•ì„±ëŠ¥): ê°™ì€ ì‚¬ìš©ì ì£¼ë¬¸ì€ ì§ë ¬ ì²˜ë¦¬

**ë°•ì„±ëŠ¥ë‹˜ ìµœì í™” ì œì•ˆ ë¶€ë¶„ ìˆ˜ìš©**:
- **Pessimistic Lock í•„ìš”ì„± ì¸ì •**: TOCTOU ê°­ ë•Œë¬¸ì— í•„ìš”í•¨
- **ì„±ëŠ¥ ìš°ë ¤ í•´ì†Œ**: íŠ¸ëœì­ì…˜ ë¶„ë¦¬ë¡œ ë½ ë³´ìœ  ì‹œê°„ ìµœì†Œí™” (ì•½ 50ms)

**ê°œì„  ì œì•ˆ**:
- **ë°•ì„±ëŠ¥**: ì¬ê³  í™•ì¸ ìºì‹± (5ì´ˆ) â†’ ì½ê¸° ë¶€í•˜ ê°ì†Œ
- **ì •ìš´ì˜**: ë°ë“œë½ ë°œìƒ ì‹œ ì•Œë¦¼ â†’ ì •ë ¬ ë¡œì§ ê²€ì¦

---

## ğŸ“ Case 5: Cart/Order ìƒíƒœ ë³€ê²½

### ğŸ¯ í˜„ì¬ êµ¬í˜„ ìš”ì•½
```java
// Optimistic Lockë§Œ ì‚¬ìš©
@Entity
public class CartItem {
    @Version
    private Long version;

    public void updateQuantity(int quantity) {
        this.quantity = quantity;
    }
}

@Entity
public class Order {
    @Version
    private Long version;

    public void complete() {
        this.status = OrderStatus.COMPLETED;
    }
}
```

---

### ğŸ’­ í† ë¡  ë‚´ìš©

**ë°•ì„±ëŠ¥** (15ë…„ì°¨, ì„±ëŠ¥ ì „ë¬¸):
> "ì¥ë°”êµ¬ë‹ˆë‚˜ ì£¼ë¬¸ ìƒíƒœ ë³€ê²½ì€ ì¶©ëŒ ê±°ì˜ ì—†ì–´ìš”. ì‚¬ìš©ì ë³¸ì¸ë§Œ ìˆ˜ì •í•˜ë‹ˆê¹Œ. Optimistic Lockë§Œìœ¼ë¡œ ì¶©ë¶„í•©ë‹ˆë‹¤. ê³¼ë„í•œ ë½ì€ ì˜¤íˆë ¤ ì„±ëŠ¥ ì €í•˜."
>
> **ì°¬ì„±**: Optimistic Lock ì ì ˆ.

**ê¹€ì •í™•** (12ë…„ì°¨, ê¸ˆìœµ ì „ë¬¸):
> "ê·¸ëŸ°ë° ì£¼ë¬¸ ìƒíƒœëŠ” ì—¬ëŸ¬ ê³³ì—ì„œ ë³€ê²½í•  ìˆ˜ ìˆì§€ ì•Šë‚˜ìš”? ì‚¬ìš©ìê°€ ì·¨ì†Œí•˜ê³ , ë™ì‹œì— ì‹œìŠ¤í…œì´ ê²°ì œ ì™„ë£Œ ì²˜ë¦¬í•˜ë©´?"
>
> **ìš°ë ¤**: ë™ì‹œ ìƒíƒœ ë³€ê²½ ê°€ëŠ¥ì„±.

**ì´ì‹¤ë¬´** (9ë…„ì°¨, ì´ì»¤ë¨¸ìŠ¤ ì „ë¬¸):
> "ì‹¤ì œë¡œëŠ” ê±°ì˜ ì•ˆ ì¼ì–´ë‚˜ìš”. ì‚¬ìš©ìê°€ ì·¨ì†Œ ë²„íŠ¼ ëˆ„ë¥´ëŠ” ë™ì•ˆ ê²°ì œ ì™„ë£Œë˜ëŠ” ê±´ ê±°ì˜ ì—†ê³ , ì„¤ë ¹ ì¼ì–´ë‚˜ë„ Optimistic Lockì´ ë§‰ì•„ì¤ë‹ˆë‹¤. í•œ ê°œë§Œ ì„±ê³µí•˜ê³  ë‚˜ë¨¸ì§€ëŠ” ì‹¤íŒ¨í•˜ì£ . ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì—ì„œ ìƒíƒœ ê²€ì¦ë„ í•˜ê³ ìš”. `order.cancel()`ì—ì„œ PENDING ìƒíƒœë§Œ ì·¨ì†Œ ê°€ëŠ¥í•˜ê²Œ."
>
> **ì‹¤ë¬´ ê²½í—˜**: ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ + Optimistic Lock ì¡°í•©.

**ìµœì‹ ê¸°ìˆ ** (10ë…„ì°¨, ëª¨ë˜ ì•„í‚¤í…ì²˜):
> "ChargeBalanceì²˜ëŸ¼ ì¬ì‹œë„ ë¡œì§ì€ ì•ˆ ë„£ë‚˜ìš”?"
>
> **ì§ˆë¬¸**: ì¬ì‹œë„ í•„ìš”?

**ì •ìš´ì˜** (7ë…„ì°¨, ìš´ì˜ ê´€ì ):
> "í•„ìš” ì—†ì–´ìš”. ìƒíƒœ ë³€ê²½ ì‹¤íŒ¨í•˜ë©´ ì‚¬ìš©ìì—ê²Œ ì—ëŸ¬ ë³´ì—¬ì£¼ê³  ë‹¤ì‹œ ì‹œë„í•˜ê²Œ í•˜ë©´ ë©ë‹ˆë‹¤. ì¶©ëŒì´ ê·¹íˆ ë“œë¬¼ì–´ì„œ ì¬ì‹œë„ ë¡œì§ ì¶”ê°€í•˜ëŠ” ê²Œ ì˜¤íˆë ¤ ë³µì¡ë„ë§Œ ëŠ˜ë ¤ìš”. KISS ì›ì¹™ (Keep It Simple, Stupid)."
>
> **ìš´ì˜ ê´€ì **: ë‹¨ìˆœí•¨ ìœ ì§€.

**ë°•ì„±ëŠ¥** (15ë…„ì°¨, ì„±ëŠ¥ ì „ë¬¸):
> "ë™ì˜í•©ë‹ˆë‹¤. Cart/Order ìƒíƒœ ë³€ê²½ì€ TPSë„ ë‚®ê³ , ì¶©ëŒë„ ë“œë¬¼ê³ , ì¬ì‹œë„ ê°€ì¹˜ë„ ë‚®ì•„ìš”. Optimistic Lockë§Œìœ¼ë¡œ ì¶©ë¶„í•©ë‹ˆë‹¤."
>
> **ìµœì¢… ì˜ê²¬**: í˜„ì¬ êµ¬í˜„ ì ì ˆ.

---

### âœ… í•©ì˜ ê²°ê³¼

**í˜„ì¬ êµ¬í˜„ ìœ ì§€ (ë§Œì¥ì¼ì¹˜)**

**ê·¼ê±°**:
1. âœ… **ì¶©ëŒ ê°€ëŠ¥ì„± ë‚®ìŒ** (ë°•ì„±ëŠ¥): ì‚¬ìš©ì ë³¸ì¸ë§Œ ìˆ˜ì •
2. âœ… **ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ê²€ì¦** (ì´ì‹¤ë¬´): ìƒíƒœ ì „ì´ ê·œì¹™ìœ¼ë¡œ ì¶”ê°€ ë°©ì–´
3. âœ… **ë‹¨ìˆœí•¨ ìœ ì§€** (ì •ìš´ì˜): ê³¼ë„í•œ ë³µì¡ë„ ë°©ì§€
4. âœ… **ì„±ëŠ¥ ìš°ìˆ˜** (ë°•ì„±ëŠ¥): ë½ ëŒ€ê¸° ì—†ìŒ
5. âœ… **ì¬ì‹œë„ ë¶ˆí•„ìš”** (ì •ìš´ì˜): ì¶©ëŒ ë“œë¬¼ê³ , ì‚¬ìš©ì ì¬ì‹œë„ ê°€ëŠ¥

**Pessimistic Lock ê¸°ê° ì´ìœ **:
- **ê¹€ì •í™•**: "ê¸ˆì•¡ì´ ì•„ë‹ˆë©´ Pessimistic Lockê¹Œì§€ ë¶ˆí•„ìš”. Optimisticìœ¼ë¡œ ì¶©ë¶„."
- **ì´ì‹¤ë¬´**: "ì‹¤ì „ì—ì„œ ê²€ì¦ë¨. ë„¤ì´ë²„í˜ì´ë„ ë¹„ìŠ·í•œ ë°©ì‹."

**ê°œì„  ì œì•ˆ**:
- **ì´ì‹¤ë¬´**: ìƒíƒœ ì „ì´ ê·œì¹™ ê°•í™” (PENDING â†’ COMPLETEDë§Œ í—ˆìš© ë“±)
- **ì •ìš´ì˜**: Optimistic Lock ì‹¤íŒ¨ ë¡œê·¸ ìˆ˜ì§‘ â†’ ì¶©ëŒ ë¹ˆë„ ëª¨ë‹ˆí„°ë§

---

## ğŸ“Š ì¢…í•© ë¶„ì„

### ë™ì‹œì„± ì œì–´ ì „ëµ ë§¤íŠ¸ë¦­ìŠ¤

| ì¼€ì´ìŠ¤ | ì¶©ëŒ ê°€ëŠ¥ì„± | ì •í™•ì„± ì¤‘ìš”ë„ | ì¬ì‹œë„ ê°€ëŠ¥ | ì„ íƒëœ ì „ëµ | ì´ìœ  |
|--------|------------|-------------|-----------|-----------|------|
| **ChargeBalance** | ë‚®ìŒ | ì¤‘ê°„ | âœ… | Optimistic + ì¬ì‹œë„ + ë¶„ì‚°ë½ | ì„±ëŠ¥ ìš°ì„ , ì¬ì‹œë„ ì•ˆì „ |
| **ProcessPayment** | ì¤‘ê°„ | ë§¤ìš° ë†’ìŒ | âŒ | Pessimistic + ë¶„ì‚°ë½ | ì •í™•ì„± ìµœìš°ì„  |
| **IssueCoupon** | ë†’ìŒ | ë§¤ìš° ë†’ìŒ | âŒ | Pessimistic + ë¶„ì‚°ë½ + Unique | ì„ ì°©ìˆœ ì •í™•ì„± |
| **CreateOrder** | ì¤‘ê°„ | ë†’ìŒ | âŒ | ë¶„ì‚°ë½ + Pessimistic (ì •ë ¬) | TOCTOU ê°­, ë°ë“œë½ ë°©ì§€ |
| **Cart/Order ìƒíƒœ** | ë§¤ìš° ë‚®ìŒ | ë‚®ìŒ | âœ… | Optimisticë§Œ | ê³¼ë„í•œ ë½ ë°©ì§€ |

---

### í•µì‹¬ ì›ì¹™ (5ëª… í•©ì˜)

#### 1. **ì •í™•ì„± ìš°ì„  vs ì„±ëŠ¥ ìš°ì„ **
- **ì •í™•ì„± ìš°ì„ **: ê¸ˆì•¡, ì„ ì°©ìˆœ, ì¬ê³  â†’ Pessimistic Lock
- **ì„±ëŠ¥ ìš°ì„ **: ì¶©ì „, ìƒíƒœ ë³€ê²½ â†’ Optimistic Lock

#### 2. **ì¬ì‹œë„ ê°€ëŠ¥ ì—¬ë¶€**
- **ì¬ì‹œë„ ê°€ëŠ¥**: Optimistic + ìë™ ì¬ì‹œë„ (ChargeBalance)
- **ì¬ì‹œë„ ë¶ˆê°€**: Pessimistic Lock (ProcessPayment, IssueCoupon)

#### 3. **ë‹¤ì¸µ ë°©ì–´ (Defense in Depth)**
- **1ì°¨**: ë¶„ì‚°ë½ (ì¸ìŠ¤í„´ìŠ¤ ê°„ ë™ì‹œì„±)
- **2ì°¨**: Pessimistic/Optimistic Lock (DB ë ˆë²¨)
- **3ì°¨**: DB Unique Constraint (ìµœì¢… ë°©ì–´ì„ )

#### 4. **KISS ì›ì¹™**
- í•„ìš”í•œ ë§Œí¼ë§Œ ë³µì¡í•˜ê²Œ (Cart/Order ìƒíƒœëŠ” Optimisticë§Œ)
- ê³¼ë„í•œ ë°©ì–´ëŠ” ì˜¤íˆë ¤ ìœ ì§€ë³´ìˆ˜ ë¶€ë‹´

#### 5. **ìš´ì˜ ê´€ì  ê³ ë ¤**
- ë¡œê·¸, ë©”íŠ¸ë¦­, ì•Œë¦¼ í•„ìˆ˜
- ì¥ì•  ìƒí™© ëŒ€ì‘ ê°€ëŠ¥í•œ êµ¬ì¡°
- ìƒˆë²½ 3ì‹œì— ì´í•´ ê°€ëŠ¥í•œ ì½”ë“œ

---

## ğŸ¯ ê° ì¼€ì´ìŠ¤ë³„ ê°œì„  ì—¬ë¶€ ê²°ë¡ 

### Case 1: ChargeBalance
**ê²°ë¡ **: **ìœ ì§€** (ê°œì„  ë¶ˆí•„ìš”)

**ë§Œì¥ì¼ì¹˜ ì˜ê²¬**:
- âœ… í˜„ì¬ êµ¬í˜„ì´ ìµœì  (Optimistic + ì¬ì‹œë„ + ë¶„ì‚°ë½)
- âœ… ì„±ëŠ¥ê³¼ ì•ˆì •ì„± ê· í˜• ì™„ë²½
- âœ… ê°œì„  ì œì•ˆ: ë©”íŠ¸ë¦­ ìˆ˜ì§‘, ì•Œë¦¼ë§Œ ì¶”ê°€

**ë°•ì„±ëŠ¥**: "ì™„ë²½í•©ë‹ˆë‹¤."
**ê¹€ì •í™•**: "ì¬ì‹œë„ ë¡œì§ ë•ë¶„ì— ì•ˆì „í•©ë‹ˆë‹¤."
**ì´ì‹¤ë¬´**: "ì‹¤ì „ ê²€ì¦ë¨."
**ìµœì‹ ê¸°ìˆ **: "ëª¨ë˜ ì•„í‚¤í…ì²˜ì—ë„ ë¶€í•©."
**ì •ìš´ì˜**: "ìš´ì˜í•˜ê¸° í¸í•©ë‹ˆë‹¤."

---

### Case 2: ProcessPayment
**ê²°ë¡ **: **ìœ ì§€** (ê°œì„  ë¶ˆí•„ìš”)

**ë§Œì¥ì¼ì¹˜ ì˜ê²¬**:
- âœ… Pessimistic Lock í•„ìˆ˜ (ì •í™•ì„± ìµœìš°ì„ )
- âœ… ë³´ìƒ íŠ¸ëœì­ì…˜ìœ¼ë¡œ ì•ˆì •ì„± ë³´ì¥
- âœ… ê³¼ì œ ì œì•½ ì¡°ê±´ ë‚´ ìµœì„ ì˜ ì„ íƒ

**ê¹€ì •í™•**: "íƒ€í˜‘ ë¶ˆê°€. Pessimistic Lock í•„ìˆ˜."
**ì´ì‹¤ë¬´**: "ê²°ì œëŠ” ì •í™•ì„±ì´ ìš°ì„ ."
**ì •ìš´ì˜**: "ê°„ë‹¨í•˜ê³  ì•ˆì „í•¨."
**ë°•ì„±ëŠ¥**: "ì„±ëŠ¥ ìš°ë ¤ë„ ì‹¤ì¸¡ ê²°ê³¼ ë¬¸ì œì—†ìŒ."
**ìµœì‹ ê¸°ìˆ **: "SagaëŠ” ì°¨ê¸° ê³¼ì œë¡œ..."

---

### Case 3: IssueCoupon
**ê²°ë¡ **: **ìœ ì§€** (ê°œì„  ë¶ˆí•„ìš”)

**ë§Œì¥ì¼ì¹˜ ì˜ê²¬**:
- âœ… 3ì¤‘ ë°©ì–´ ì™„ë²½
- âœ… TOCTOU ê°­ ì œê±°
- âœ… ì„ ì°©ìˆœ ì •í™•ì„± 100% ë³´ì¥

**ê¹€ì •í™•**: "ì™„ë²½í•œ ì„¤ê³„!"
**ì´ì‹¤ë¬´**: "TOCTOU ê°­ ì œê±°ê°€ í•µì‹¬."
**ì •ìš´ì˜**: "DB Unique Constraintê°€ ìµœì¢… ë°©ì–´ì„ ."
**ë°•ì„±ëŠ¥**: "1ì°¨ ë°©ì–´ê°€ ì„±ëŠ¥ì—ë„ ë„ì›€."
**ìµœì‹ ê¸°ìˆ **: "í˜„ì¬ êµ¬ì¡° ì™„ë²½."

---

### Case 4: CreateOrder
**ê²°ë¡ **: **ìœ ì§€** (ê°œì„  ë¶ˆí•„ìš”)

**ë§Œì¥ì¼ì¹˜ ì˜ê²¬**:
- âœ… TOCTOU ê°­ ì œê±° (Pessimistic Lock)
- âœ… ë°ë“œë½ ë°©ì§€ (ìƒí’ˆ ID ì •ë ¬)
- âœ… íŠ¸ëœì­ì…˜ ë¶„ë¦¬ë¡œ ë½ ë³´ìœ  ì‹œê°„ ìµœì†Œí™”

**ê¹€ì •í™•**: "TOCTOU ê°­ í•„ìˆ˜ ì œê±°."
**ì´ì‹¤ë¬´**: "ë°ë“œë½ ë°©ì§€ ë¡œì§ ì™„ë²½."
**ì •ìš´ì˜**: "íŠ¸ëœì­ì…˜ ë¶„ë¦¬ ì ì ˆ."
**ë°•ì„±ëŠ¥**: "ì„±ëŠ¥ ìš°ë ¤ í•´ì†Œë¨."
**ìµœì‹ ê¸°ìˆ **: "í˜„ì¬ êµ¬ì¡° í•©ë¦¬ì ."

---

### Case 5: Cart/Order ìƒíƒœ ë³€ê²½
**ê²°ë¡ **: **ìœ ì§€** (ê°œì„  ë¶ˆí•„ìš”)

**ë§Œì¥ì¼ì¹˜ ì˜ê²¬**:
- âœ… Optimistic Lockë§Œìœ¼ë¡œ ì¶©ë¶„
- âœ… ê³¼ë„í•œ ë½ ë°©ì§€ (KISS ì›ì¹™)
- âœ… ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ê²€ì¦ìœ¼ë¡œ ì¶”ê°€ ë°©ì–´

**ë°•ì„±ëŠ¥**: "ê³¼ë„í•œ ë½ì€ ì„±ëŠ¥ ì €í•˜."
**ê¹€ì •í™•**: "ê¸ˆì•¡ ì•„ë‹ˆë©´ Optimistic ì¶©ë¶„."
**ì´ì‹¤ë¬´**: "ì‹¤ì „ ê²€ì¦ë¨."
**ìµœì‹ ê¸°ìˆ **: "ë‹¨ìˆœí•¨ì´ ìµœì„ ."
**ì •ìš´ì˜**: "ìœ ì§€ë³´ìˆ˜ í¸í•¨."

---

## ğŸ“š í•™ìŠµ í¬ì¸íŠ¸

### 1. **Optimistic vs Pessimistic Lock ì„ íƒ ê¸°ì¤€**

**Optimistic Lock ì„ íƒ ì¡°ê±´** (AND):
1. âœ… ì¶©ëŒ ê°€ëŠ¥ì„± ë‚®ìŒ
2. âœ… ì¬ì‹œë„ ê°€ëŠ¥ (ë©±ë“±ì„± ë³´ì¥)
3. âœ… ì„±ëŠ¥ ì¤‘ìš”

**Pessimistic Lock ì„ íƒ ì¡°ê±´** (OR):
1. âœ… ì¶©ëŒ ê°€ëŠ¥ì„± ë†’ìŒ
2. âœ… ì¬ì‹œë„ ë¶ˆê°€ëŠ¥ (ë¹„ë©±ë“±)
3. âœ… ì •í™•ì„± ìµœìš°ì„  (ê¸ˆì•¡, ì„ ì°©ìˆœ)

---

### 2. **ë¶„ì‚°ë½ ì‚¬ìš© ê¸°ì¤€**

**ë¶„ì‚°ë½ í•„ìˆ˜ ì¡°ê±´**:
1. âœ… ë¶„ì‚° í™˜ê²½ (ì—¬ëŸ¬ ì¸ìŠ¤í„´ìŠ¤)
2. âœ… ì¸ìŠ¤í„´ìŠ¤ ê°„ ë™ì‹œì„± ì œì–´ í•„ìš”
3. âœ… TOCTOU ê°­ ì œê±° í•„ìš”

**ë¶„ì‚°ë½ ë¶ˆí•„ìš” ì¡°ê±´**:
1. âŒ ë‹¨ì¼ ì¸ìŠ¤í„´ìŠ¤
2. âŒ DB Lockë§Œìœ¼ë¡œ ì¶©ë¶„ (Cart/Order ìƒíƒœ)

---

### 3. **ì¬ì‹œë„ ì „ëµ ì„ íƒ ê¸°ì¤€**

**ì¬ì‹œë„ ì ìš© ì¡°ê±´** (AND):
1. âœ… Optimistic Lock ì‚¬ìš©
2. âœ… ì¬ì‹œë„ ì•ˆì „ (ë©±ë“±ì„±)
3. âœ… ì¶©ëŒ ê°€ëŠ¥ì„± ë‚®ìŒ (ì¬ì‹œë„ë¡œ í•´ê²° ê°€ëŠ¥)

**ì¬ì‹œë„ ë¶€ì ìš© ì¡°ê±´** (OR):
1. âŒ Pessimistic Lock ì‚¬ìš© (ì¶©ëŒ ì—†ìŒ)
2. âŒ ì¬ì‹œë„ ë¶ˆì•ˆì „ (ë¹„ë©±ë“±)
3. âŒ ì¶©ëŒ ê·¹íˆ ë“œë¬¼ì–´ ì¬ì‹œë„ ê°€ì¹˜ ë‚®ìŒ (Cart/Order ìƒíƒœ)

---

### 4. **ë°ë“œë½ ë°©ì§€ ì „ëµ**

**ë°ë“œë½ ë°œìƒ ì¡°ê±´**:
1. ì—¬ëŸ¬ ë¦¬ì†ŒìŠ¤ ë™ì‹œ ë½ (ì—¬ëŸ¬ ìƒí’ˆ ì£¼ë¬¸)
2. ë½ ìˆœì„œ ë¶ˆì¼ì¹˜ (Aâ†’B vs Bâ†’A)

**ë°ë“œë½ ë°©ì§€ ë°©ë²•**:
1. âœ… ë½ ìˆœì„œ í†µì¼ (ìƒí’ˆ ID ì˜¤ë¦„ì°¨ìˆœ ì •ë ¬)
2. âœ… íƒ€ì„ì•„ì›ƒ ì„¤ì •
3. âœ… ëª¨ë‹ˆí„°ë§ ë° ì•Œë¦¼

---

### 5. **ê³¼ì œ ì œì•½ ì¡°ê±´ ë‚´ ìµœì„ ì˜ ì„ íƒ**

**ì œì•½ ì¡°ê±´**:
- âŒ Kafka, MQ ì‚¬ìš© ë¶ˆê°€
- âœ… JPA, Lock ê¸°ë°˜ í•´ê²°

**ìµœì„ ì˜ ì„ íƒ**:
1. âœ… Pessimistic Lock (ì •í™•ì„± í•„ìˆ˜)
2. âœ… Optimistic Lock + ì¬ì‹œë„ (ì„±ëŠ¥ ìš°ì„ )
3. âœ… ë¶„ì‚°ë½ (ë¶„ì‚° í™˜ê²½ ëŒ€ì‘)
4. âœ… DB Unique Constraint (ìµœì¢… ë°©ì–´ì„ )
5. âœ… ë³´ìƒ íŠ¸ëœì­ì…˜ (ë¡¤ë°±)

**í–¥í›„ ê°œì„ ** (Week 7+):
- Saga Pattern (Kafka, MQ ë„ì…)
- Event Sourcing
- CQRS

---

## ğŸ“ ìµœì¢… ê²°ë¡ 

### í˜„ì¬ êµ¬í˜„ í‰ê°€

**5ëª… ì‹œë‹ˆì–´ ì—”ì§€ë‹ˆì–´ ë§Œì¥ì¼ì¹˜ ì˜ê²¬**:

> "í˜„ì¬ êµ¬í˜„ì€ ê³¼ì œ ì œì•½ ì¡°ê±´(Kafka/MQ ë¯¸ì‚¬ìš©) ë‚´ì—ì„œ **ìµœì„ ì˜ ì„ íƒ**ì…ë‹ˆë‹¤. ê° ì¼€ì´ìŠ¤ë³„ë¡œ ì ì ˆí•œ ë™ì‹œì„± ì œì–´ ì „ëµì„ ì„ íƒí–ˆê³ , ë‹¤ì¸µ ë°©ì–´ë¡œ ì•ˆì •ì„±ì„ í™•ë³´í–ˆìŠµë‹ˆë‹¤. ì„±ëŠ¥ê³¼ ì •í™•ì„±ì˜ ê· í˜•ë„ í›Œë¥­í•©ë‹ˆë‹¤."

**ë§Œì¥ì¼ì¹˜ ê²°ë¡ **:
- âœ… **5ê°œ ì¼€ì´ìŠ¤ ëª¨ë‘ í˜„ì¬ êµ¬í˜„ ìœ ì§€**
- âœ… **ê°œì„  ë¶ˆí•„ìš”** (ë©”íŠ¸ë¦­, ì•Œë¦¼ë§Œ ì¶”ê°€)
- âœ… **í”„ë¡œë•ì…˜ ë°°í¬ ê°€ëŠ¥ ìˆ˜ì¤€**

---

### ê°œì„  ì œì•ˆ (ì„ íƒì )

#### ë‹¨ê¸° ê°œì„  (Week 7-8)
1. **ë©”íŠ¸ë¦­ ìˆ˜ì§‘** (ë°•ì„±ëŠ¥ ì œì•ˆ)
   - ì¬ì‹œë„ íšŸìˆ˜, ì„±ê³µë¥ , ë½ ëŒ€ê¸° ì‹œê°„
   - Prometheus + Grafana

2. **ì•Œë¦¼ ì‹œìŠ¤í…œ** (ê¹€ì •í™•, ì •ìš´ì˜ ì œì•ˆ)
   - ì¬ì‹œë„ 10íšŒ ì´ˆê³¼
   - ë°ë“œë½ ë°œìƒ
   - ë³´ìƒ íŠ¸ëœì­ì…˜ ì‹¤íŒ¨

3. **ëª¨ë‹ˆí„°ë§ ëŒ€ì‹œë³´ë“œ** (ì •ìš´ì˜ ì œì•ˆ)
   - ë™ì‹œì„± ì¶©ëŒ ë¹ˆë„
   - Optimistic Lock ì‹¤íŒ¨ìœ¨
   - Unique Constraint ìœ„ë°˜ íšŸìˆ˜

#### ì¤‘ê¸° ê°œì„  (Week 9-12)
1. **Circuit Breaker** (ìµœì‹ ê¸°ìˆ  ì œì•ˆ)
   - Redis ì¥ì•  ì‹œ fallback
   - ì™¸ë¶€ API ì¥ì•  ëŒ€ì‘

2. **Rate Limiting** (ë°•ì„±ëŠ¥ ì œì•ˆ)
   - ì‚¬ìš©ìë³„ ìš”ì²­ ë¹ˆë„ ì œí•œ
   - DDoS ë°©ì–´

#### ì¥ê¸° ê°œì„  (í–¥í›„)
1. **Saga Pattern** (ìµœì‹ ê¸°ìˆ  ì œì•ˆ)
   - Kafka ê¸°ë°˜ ì´ë²¤íŠ¸ ë“œë¦¬ë¸
   - ë³´ìƒ íŠ¸ëœì­ì…˜ ìë™í™”

2. **Event Sourcing** (ìµœì‹ ê¸°ìˆ  ì œì•ˆ)
   - ì”ì•¡ ë³€ê²½ ì´ë ¥ ì´ë²¤íŠ¸ ì €ì¥
   - ìµœì¢… ì¼ê´€ì„±

3. **CQRS** (ë°•ì„±ëŠ¥ ì œì•ˆ)
   - ì½ê¸°/ì“°ê¸° ë¶„ë¦¬
   - ì„±ëŠ¥ ê·¹ëŒ€í™”

---

### í”„ë¡œë•ì…˜ ë°°í¬ ì²´í¬ë¦¬ìŠ¤íŠ¸

#### í•„ìˆ˜ í•­ëª© (í˜„ì¬ ì™„ë£Œ)
- [x] ChargeBalance: Optimistic + ì¬ì‹œë„ + ë¶„ì‚°ë½
- [x] ProcessPayment: Pessimistic + ë¶„ì‚°ë½ + ë³´ìƒ
- [x] IssueCoupon: Pessimistic + ë¶„ì‚°ë½ + Unique
- [x] CreateOrder: ë¶„ì‚°ë½ + Pessimistic + ë°ë“œë½ ë°©ì§€
- [x] Cart/Order ìƒíƒœ: Optimisticë§Œ
- [x] ë™ì‹œì„± í…ŒìŠ¤íŠ¸ í†µê³¼
- [x] Lost Update ë°©ì§€ ê²€ì¦

#### ì¶”ì²œ í•­ëª© (ê°œì„ )
- [ ] ë©”íŠ¸ë¦­ ìˆ˜ì§‘ (Prometheus)
- [ ] ì•Œë¦¼ ì„¤ì • (Slack)
- [ ] ëª¨ë‹ˆí„°ë§ ëŒ€ì‹œë³´ë“œ (Grafana)
- [ ] ë¶€í•˜ í…ŒìŠ¤íŠ¸ (JMeter, K6)
- [ ] Circuit Breaker (Resilience4j)

---

## ğŸ“ ì‹œë‹ˆì–´ ì—”ì§€ë‹ˆì–´ë“¤ì˜ ì¡°ì–¸

**ë°•ì„±ëŠ¥** (15ë…„ì°¨):
> "ì„±ëŠ¥ê³¼ ì •í™•ì„±ì˜ ê· í˜•ì´ ì™„ë²½í•©ë‹ˆë‹¤. ê° ì¼€ì´ìŠ¤ë³„ë¡œ ì ì ˆí•œ ì „ëµì„ ì„ íƒí–ˆì–´ìš”. ë‹¤ë§Œ ë©”íŠ¸ë¦­ ìˆ˜ì§‘ì€ ê¼­ í•˜ì„¸ìš”. ì‹¤ì œ ë¶€í•˜ ìƒí™©ì—ì„œ íŠœë‹ í¬ì¸íŠ¸ ì°¾ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤."

**ê¹€ì •í™•** (12ë…„ì°¨):
> "ê¸ˆìœµê¶Œì—ì„œ ì¼í–ˆë˜ ì…ì¥ì—ì„œ, í˜„ì¬ êµ¬í˜„ì€ ì•ˆì „í•©ë‹ˆë‹¤. íŠ¹íˆ ë‹¤ì¸µ ë°©ì–´ ì „ëµì´ í›Œë¥­í•´ìš”. ë³´ìƒ íŠ¸ëœì­ì…˜ë„ ì˜ êµ¬í˜„í–ˆê³ ìš”. í”„ë¡œë•ì…˜ ë°°í¬í•´ë„ ë©ë‹ˆë‹¤."

**ì´ì‹¤ë¬´** (9ë…„ì°¨):
> "ì‹¤ì „ì—ì„œ ê²€ì¦ëœ ë°©ì‹ë“¤ì…ë‹ˆë‹¤. ë„¤ì´ë²„, ì¿ íŒ¡ì—ì„œë„ ë¹„ìŠ·í•˜ê²Œ êµ¬í˜„í•´ìš”. KISS ì›ì¹™ ì˜ ì§€ì¼°ê³ , ê³¼ë„í•œ ë³µì¡ë„ ì—†ì–´ì„œ ìœ ì§€ë³´ìˆ˜ í¸í•  ê²ë‹ˆë‹¤."

**ìµœì‹ ê¸°ìˆ ** (10ë…„ì°¨):
> "í˜„ì¬ ê³¼ì œ ì œì•½ ì¡°ê±´ ë‚´ì—ì„œëŠ” ìµœì„ ì…ë‹ˆë‹¤. ë‹¤ë§Œ í–¥í›„ì—ëŠ” Saga, Event Sourcing, CQRS ë„ì… ê³ ë ¤í•˜ì„¸ìš”. í™•ì¥ì„±ê³¼ ìœ ì—°ì„±ì´ í›¨ì”¬ ì¢‹ì•„ì§‘ë‹ˆë‹¤."

**ì •ìš´ì˜** (7ë…„ì°¨):
> "ìš´ì˜ ê´€ì ì—ì„œ ë§¤ìš° ë§Œì¡±ìŠ¤ëŸ½ìŠµë‹ˆë‹¤. ë¡œê·¸ ì˜ ë‚¨ê¸°ê³ , ì¥ì•  ìƒí™© ëŒ€ì‘ ê°€ëŠ¥í•˜ê³ , ìƒˆë²½ì— ê¹¨ì›Œë„ ë¹ ë¥´ê²Œ ì´í•´í•  ìˆ˜ ìˆì–´ìš”. ì•Œë¦¼ ì‹œìŠ¤í…œë§Œ ì¶”ê°€í•˜ë©´ ì™„ë²½í•©ë‹ˆë‹¤."

---

## ğŸ“– ì°¸ê³  ìë£Œ

### ë‚´ë¶€ ë¬¸ì„œ
- `@.claude/commands/concurrency.md` - ë™ì‹œì„± ì œì–´ íŒ¨í„´
- `@.claude/commands/architecture.md` - ë ˆì´ì–´ë“œ ì•„í‚¤í…ì²˜
- `@docs/week6/concurrency-analysis/01-chargebalance-improvement-report.md`

### ì™¸ë¶€ ì°¸ê³ 
- [Database Locking (Martin Fowler)](https://martinfowler.com/eaaCatalog/optimisticOfflineLock.html)
- [Distributed Locks (Redis)](https://redis.io/docs/manual/patterns/distributed-locks/)
- [TOCTOU Problem (Wikipedia)](https://en.wikipedia.org/wiki/Time-of-check_to_time-of-use)

---

**ì‘ì„±ì**: Backend Development Team (5ëª… ì‹œë‹ˆì–´ ì—”ì§€ë‹ˆì–´ í˜ë¥´ì†Œë‚˜)
**ìµœì¢… ìˆ˜ì •**: 2025-11-26
**ë²„ì „**: 1.0
**ê²°ë¡ **: **5ê°œ ì¼€ì´ìŠ¤ ëª¨ë‘ í˜„ì¬ êµ¬í˜„ ìœ ì§€ (ê°œì„  ë¶ˆí•„ìš”)**
