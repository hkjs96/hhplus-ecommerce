# Week 7 학습 로드맵

## 📚 전체 주제

**"Redis 자료구조의 이해를 바탕으로 랭킹 시스템과 대기열, 쿠폰 발급 기능을 효율적으로 설계한다"**

---

## 🎯 10시간 학습 로드맵 (5일 코스)

### Day 1: Redis 자료구조 이해하기 (2시간)

#### 목표
Redis의 기본 개념과 자료구조(String, Set, Sorted Set)를 학습하고 활용법을 익힌다.

#### 학습 키워드
- Key-Value 구조
- Strings / Sets / Sorted Sets
- TTL, Expire

#### To-Do
- [ ] 각 자료구조별 명령어 실습 (`SET`, `SADD`, `ZADD` 등)
- [ ] Redis 구조별 특징 및 활용 사례 정리
- [ ] TTL 설정과 메모리 누수 방지 전략 학습

#### 언어별 세팅

| 언어 | Redis 연동 방식 |
|------|----------------|
| Java | Spring Data Redis + RedisTemplate |
| Kotlin | Spring Redis + DSL 스타일 활용 |
| TypeScript | ioredis 기반 명령어 조합 |

#### 자가진단표
- [ ] 자료구조별 차이와 사용 목적을 설명할 수 있다
- [ ] TTL이 왜 필요한지 이해하고 있다
- [ ] 적절한 자료구조를 과제 상황에 맞게 선택할 수 있다

---

### Day 2: 실시간 랭킹 시스템 설계 (2시간)

#### 목표
Sorted Set을 활용하여 사용자/상품 기반의 실시간 랭킹 기능을 설계하고 구현한다.

#### 학습 키워드
- ZADD / ZREVRANK / ZINCRBY / EXPIRE
- score 기반 정렬 / TTL 기반 주기 초기화

#### To-Do
- [ ] 일간/주간 랭킹을 위한 Key 설계 (`ranking:daily:{date}`)
- [ ] 인기 콘텐츠 / 주문 수 기반 랭킹 데이터 입력 실습
- [ ] 랭킹 TOP N 추출 및 사용자 순위 확인 API 설계

#### 언어별 세팅

| 언어 | 랭킹 시스템 구현 방식 |
|------|---------------------|
| Java | ZSet 명령어 + TTL 스케줄링 구성 |
| Kotlin | Coroutine 기반 서비스 설계 |
| TypeScript | ZREVRANGE API + 캐시 결과 반환 |

#### 자가진단표
- [ ] Sorted Set 구조를 활용한 랭킹 처리가 가능하다
- [ ] TTL과 만료 전략을 키 네이밍과 함께 설계할 수 있다
- [ ] score 동률 시 정렬 보완 전략을 고민해봤다

---

### Day 3: 대기열 & 사용자 상태 관리 구조 설계 (2시간)

#### 목표
Redis Set/List를 활용한 대기열/토큰 상태 관리를 설계한다.

#### 학습 키워드
- 대기열: List / Sorted Set
- 사용자 상태 토큰 관리: Set
- TTL을 활용한 자동 소멸

#### To-Do
- [ ] Waiting / Active 사용자 분리 저장 구조 설계
- [ ] 순차 처리 vs 우선순위 처리 전략 수립
- [ ] 실시간 대기 인원 수 추적 기능 구현

#### 언어별 세팅

| 언어 | 대기열 구성 방식 |
|------|----------------|
| Java | RedisTemplate + Queue-like 처리 |
| Kotlin | Redis List 연동 + 대기번호 추적 |
| TypeScript | lpush/rpop 기반 토큰 대기열 처리 |

#### 자가진단표
- [ ] 대기열 설계에서 FIFO or 우선순위 구조를 구분할 수 있다
- [ ] 사용자 상태별 데이터 분리를 고려할 수 있다
- [ ] TTL을 활용한 자동 만료 전략을 적용할 수 있다

---

### Day 4: 선착순 쿠폰 발급 시스템 설계 (2시간)

#### 목표
Redis 자료구조를 활용해 중복 없는 선착순 쿠폰 발급 기능을 구현한다.

#### 학습 키워드
- 쿠폰 재고 관리: List or Sorted Set
- 중복 방지: Set
- 락 없이 처리 가능한 구조 설계

#### To-Do
- [ ] 쿠폰 수량 제한 및 발급자 기록 구조 설계
- [ ] SADD + LPOP 구조 구현 실습
- [ ] 동시 요청에 대한 안정성 확보 전략 수립

#### 언어별 세팅

| 언어 | 쿠폰 발급 처리 방식 |
|------|------------------|
| Java | SADD + DECR 구조 구현 |
| Kotlin | RedisCommand 실행 기반 쿠폰 처리 로직 설계 |
| TypeScript | Lua Script 활용해 원자성 확보한 쿠폰 처리 |

#### 자가진단표
- [ ] 중복 쿠폰 발급 방지 처리를 구현할 수 있다
- [ ] 재고 부족 시 처리 흐름을 설계할 수 있다
- [ ] 쿠폰 발급자 기록을 TTL과 함께 관리할 수 있다

---

### Day 5: 종합 실습 및 회고 설계 (2시간)

#### 목표
랭킹 / 대기열 / 쿠폰 기능을 통합 설계하고 회고를 통해 개선 방향을 도출한다.

#### 학습 키워드
- 기능 통합 설계 / TTL / 실시간 조회 API 설계
- Redis Key Naming 규칙 / 만료 및 초기화 전략
- 개발 결과 회고 (KPT)

#### To-Do
- [ ] 이커머스 or 콘서트 예매 시나리오 중 택 1로 통합 설계 진행
- [ ] 기능 간 Key 충돌, TTL 격리 전략 수립
- [ ] 회고(KPT) 및 개선 아이디어 정리

#### 언어별 세팅

| 언어 | 통합 구조 적용 방식 |
|------|------------------|
| Java | 통합 테스트 시나리오 구성 + KPT 작성 |
| Kotlin | 각 기능 테스트 분리 후 통합 설계 |
| TypeScript | 랭킹/대기열/쿠폰 API 통합 설계 및 로그 기반 검증 |

#### 자가진단표
- [ ] 각 기능을 하나의 서비스 흐름으로 통합할 수 있다
- [ ] Redis Key 설계 기준을 명확히 할 수 있다
- [ ] 회고를 통해 개선 방향을 도출해봤다

---

## ⚡ 3시간 압축 학습 가이드

### 시간 분배

| 세션 | 주제 | 소요 시간 |
|------|------|----------|
| 1 | Redis 자료구조 핵심 이해 | 45분 |
| 2 | 실시간 랭킹 시스템 설계 | 45분 |
| 3 | 대기열 & 쿠폰 발급 구조 비교 설계 | 45분 |
| 4 | 종합 설계 & 실습 아이디어 정리 | 45분 |

---

### 세션 1: Redis 자료구조 핵심 이해 (45분)

#### 핵심 메시지
- Redis는 단순 캐시가 아닌 다양한 자료구조를 제공하는 고성능 데이터 저장소이다
- 올바른 자료구조 선택이 성능과 동시성 제어의 핵심이다

#### 빠르게 배우는 포인트
- Strings, Sets, Sorted Sets의 구조와 차이점 이해
- TTL과 Expire를 통해 자동 만료를 설계하는 이유
- 각 자료구조별 실무 예시 연결 (e.g. Set으로 중복 방지)

#### 퀴즈
- [ ] Set과 Sorted Set의 가장 큰 차이는?
- [ ] TTL이 누락되었을 때 발생할 수 있는 문제는?

---

### 세션 2: 실시간 랭킹 시스템 설계 (45분)

#### 핵심 메시지
- Sorted Set은 점수 기반의 실시간 랭킹 구현에 매우 적합하다
- TTL을 함께 사용하여 일간/주간 랭킹 구조를 만들 수 있다

#### 빠르게 배우는 포인트
- ZADD / ZREVRANK / ZINCRBY / EXPIRE 명령어 흐름
- `ranking:daily:{date}` 패턴의 키 전략
- 랭킹 점수 동률 시 보완 전략 (예: 타임스탬프 병합)

#### 퀴즈
- [ ] ZREVRANGE와 ZREVRANK의 차이는?
- [ ] 일간 랭킹 TTL을 적용하지 않았을 때 생기는 문제는?

---

### 세션 3: 대기열 & 쿠폰 발급 구조 비교 설계 (45분)

#### 핵심 메시지
- 대기열은 순서 보장이 중요하고, 쿠폰은 중복 방지가 중요하다
- 각각에 맞는 자료구조를 선택해 설계해야 한다

#### 빠르게 배우는 포인트
- 쿠폰 발급 구조 → Redis Set + 재고 String 분리 (`SADD`, `DECR`)
- 대기열 구조 → Redis List (`LPUSH`, `RPOP`)
- TTL을 활용한 사용자 상태 만료 처리

#### 퀴즈
- [ ] 쿠폰 중복 발급을 막기 위해 가장 적절한 자료구조는?
- [ ] FIFO 처리가 필요한 상황에 Set을 쓰면 생길 수 있는 문제는?

---

### 세션 4: 종합 설계 & 실습 아이디어 정리 (45분)

#### 핵심 메시지
- 기능 간 Key 충돌과 TTL 분리 전략이 설계의 품질을 결정한다
- 단순한 구조라도 설계 기준을 갖고 구현해야 유지보수가 가능하다

#### 빠르게 배우는 포인트
- 기능별 키 네이밍 전략 정리 (`ranking:`, `coupon:`, `waiting:` 등)
- 일관된 TTL 관리 전략 수립
- 랭킹 + 쿠폰 발급 + 대기열을 하나의 흐름으로 설계하는 실습 아이디어

#### 퀴즈
- [ ] 기능 통합 설계에서 가장 주의해야 할 Key 설계 실수는?
- [ ] TTL이 짧게 설정될 경우 어떤 문제가 발생할 수 있을까?

---

## 📊 학습 진행 체크리스트

### 기초 학습 (Day 1-2 / 세션 1-2)
- [ ] Redis 자료구조 3가지 이해 (String, Set, Sorted Set)
- [ ] TTL 개념과 메모리 관리 이해
- [ ] Sorted Set 기반 랭킹 시스템 설계
- [ ] ZINCRBY 원자성 이해

### 심화 학습 (Day 3-4 / 세션 3-4)
- [ ] 대기열 설계 (FIFO vs 우선순위)
- [ ] 쿠폰 발급 시스템 설계
- [ ] 중복 방지 전략 (Set 활용)
- [ ] 트랜잭션 규칙 이해 (수량 차감 + 발급 기록)

### 통합 실습 (Day 5 / 세션 4)
- [ ] 기능별 Key 네이밍 전략 수립
- [ ] TTL 관리 전략 수립
- [ ] 통합 설계 시나리오 작성
- [ ] KPT 회고 작성

---

## 🎯 학습 목표 달성 기준

### 최소 목표 (3시간 코스)
- [ ] Redis 자료구조 3가지를 설명할 수 있다
- [ ] Sorted Set으로 랭킹을 구현할 수 있다
- [ ] Set으로 중복 발급을 방지할 수 있다
- [ ] TTL을 설정할 수 있다

### 권장 목표 (10시간 코스)
- [ ] 자료구조별 사용 사례를 구분할 수 있다
- [ ] 일간/주간 랭킹 키 전략을 설계할 수 있다
- [ ] 쿠폰 발급 트랜잭션을 구현할 수 있다
- [ ] 대기열 시스템을 설계할 수 있다
- [ ] 통합 시스템 설계 문서를 작성할 수 있다

### 우수 목표 (추가 학습)
- [ ] Lua 스크립트로 원자적 처리를 구현할 수 있다
- [ ] Redis 이벤트 루프 특성을 이해하고 있다
- [ ] 성능 최적화 전략을 수립할 수 있다
- [ ] Testcontainers로 동시성 테스트를 작성할 수 있다

---

## 📚 학습 자료

### 필수 문서
- `agent_docs/redis_ranking.md` - 랭킹 시스템 구현 가이드
- `agent_docs/redis_coupon_issue.md` - 쿠폰 발급 구현 가이드
- `agent_docs/testing_redis_features.md` - 테스트 시나리오
- `docs/week7/REDIS_BASICS.md` - Redis 기초 개념
- `docs/week7/COACH_QNA_SUMMARY.md` - 코치 QnA 핵심 요약

### 참고 링크
- [Redis 공식 문서](https://redis.io/docs/)
- [Redis Data Types](https://redis.io/docs/data-types/)
- [Redis Sorted Sets](https://redis.io/docs/data-types/sorted-sets/)
- [Redis Testcontainers](https://java.testcontainers.org/modules/databases/redis/)

---

## 💡 학습 팁

### 1. 실습 우선
- 이론보다 실습을 먼저
- Redis CLI로 직접 명령어 실행
- RedisTemplate/ioredis로 코드 작성

### 2. 문서 활용
- `agent_docs/` 문서는 구현 시 참조
- QnA 요약은 개념 이해 시 참조
- 막히면 즉시 문서 확인

### 3. 테스트 작성
- 각 기능 구현 후 즉시 테스트 작성
- Testcontainers로 실제 Redis 환경 테스트
- 동시성 테스트 필수

### 4. 회고 작성
- Day 5 / 세션 4에 반드시 회고 작성
- KPT 형식 권장 (Keep, Problem, Try)
- 개선 방향 도출

---

## ✅ 다음 단계

1. **학습 시작:** 10시간 또는 3시간 코스 선택
2. **실습:** `agent_docs/` 문서 참조하여 구현
3. **테스트:** `testing_redis_features.md` 참조하여 검증
4. **회고:** KPT 형식으로 회고 작성
5. **과제 제출:** PR 생성 및 보고서 작성
