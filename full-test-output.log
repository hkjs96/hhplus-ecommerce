> Task :compileJava UP-TO-DATE
> Task :processResources UP-TO-DATE
> Task :classes UP-TO-DATE
> Task :compileTestJava
> Task :processTestResources UP-TO-DATE
> Task :testClasses
OpenJDK 64-Bit Server VM warning: Sharing is only supported for boot loader classes because bootstrap classpath has been appended
> Task :test

ChargeBalanceIdempotencyTest > Í∞ôÏùÄ idempotencyKeyÎ°ú Îëê Î≤à ÏöîÏ≤≠ ‚Üí Ï§ëÎ≥µ Ï∂©Ï†Ñ Î∞©ÏßÄ FAILED
    org.opentest4j.AssertionFailedError at ChargeBalanceIdempotencyTest.java:75

ChargeBalanceIdempotencyTest > Ï∫êÏãúÎêú ÏùëÎãµ Î∞òÌôò Ïãú DB ÏóÖÎç∞Ïù¥Ìä∏ ÏóÜÏùå FAILED
    org.opentest4j.AssertionFailedError at ChargeBalanceIdempotencyTest.java:137

2025-12-11 21:56:40 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-12-11 21:56:40 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Shutdown initiated...
2025-12-11 21:56:40 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Shutdown completed.
2025-12-11 21:56:40 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-12-11 21:56:40 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    [34mdrop[0m [34mtable[0m [34mif[0m [34mexists[0m cart_items [34mcascade[0m 
[35m[Hibernate][0m 
    [34mdrop[0m [34mtable[0m [34mif[0m [34mexists[0m cart_items [34mcascade[0m 
2025-12-11 21:56:40 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    [34mdrop[0m [34mtable[0m [34mif[0m [34mexists[0m carts [34mcascade[0m 
[35m[Hibernate][0m 
    [34mdrop[0m [34mtable[0m [34mif[0m [34mexists[0m carts [34mcascade[0m 
2025-12-11 21:56:40 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    [34mdrop[0m [34mtable[0m [34mif[0m [34mexists[0m charge_balance_idempotency [34mcascade[0m 
[35m[Hibernate][0m 
    [34mdrop[0m [34mtable[0m [34mif[0m [34mexists[0m charge_balance_idempotency [34mcascade[0m 
2025-12-11 21:56:40 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    [34mdrop[0m [34mtable[0m [34mif[0m [34mexists[0m coupons [34mcascade[0m 
[35m[Hibernate][0m 
    [34mdrop[0m [34mtable[0m [34mif[0m [34mexists[0m coupons [34mcascade[0m 
2025-12-11 21:56:40 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    [34mdrop[0m [34mtable[0m [34mif[0m [34mexists[0m order_idempotency [34mcascade[0m 
[35m[Hibernate][0m 
    [34mdrop[0m [34mtable[0m [34mif[0m [34mexists[0m order_idempotency [34mcascade[0m 
2025-12-11 21:56:40 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    [34mdrop[0m [34mtable[0m [34mif[0m [34mexists[0m order_items [34mcascade[0m 
[35m[Hibernate][0m 
    [34mdrop[0m [34mtable[0m [34mif[0m [34mexists[0m order_items [34mcascade[0m 
2025-12-11 21:56:40 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    [34mdrop[0m [34mtable[0m [34mif[0m [34mexists[0m orders [34mcascade[0m 
[35m[Hibernate][0m 
    [34mdrop[0m [34mtable[0m [34mif[0m [34mexists[0m orders [34mcascade[0m 
2025-12-11 21:56:40 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    [34mdrop[0m [34mtable[0m [34mif[0m [34mexists[0m payment_idempotency [34mcascade[0m 
[35m[Hibernate][0m 
    [34mdrop[0m [34mtable[0m [34mif[0m [34mexists[0m payment_idempotency [34mcascade[0m 
2025-12-11 21:56:40 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    [34mdrop[0m [34mtable[0m [34mif[0m [34mexists[0m product_ranking_backup [34mcascade[0m 
[35m[Hibernate][0m 
    [34mdrop[0m [34mtable[0m [34mif[0m [34mexists[0m product_ranking_backup [34mcascade[0m 
2025-12-11 21:56:40 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    [34mdrop[0m [34mtable[0m [34mif[0m [34mexists[0m product_sales_aggregates [34mcascade[0m 
[35m[Hibernate][0m 
    [34mdrop[0m [34mtable[0m [34mif[0m [34mexists[0m product_sales_aggregates [34mcascade[0m 
2025-12-11 21:56:40 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    [34mdrop[0m [34mtable[0m [34mif[0m [34mexists[0m products [34mcascade[0m 
[35m[Hibernate][0m 
    [34mdrop[0m [34mtable[0m [34mif[0m [34mexists[0m products [34mcascade[0m 
2025-12-11 21:56:40 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    [34mdrop[0m [34mtable[0m [34mif[0m [34mexists[0m user_coupons [34mcascade[0m 
[35m[Hibernate][0m 
    [34mdrop[0m [34mtable[0m [34mif[0m [34mexists[0m user_coupons [34mcascade[0m 
2025-12-11 21:56:40 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    [34mdrop[0m [34mtable[0m [34mif[0m [34mexists[0m users [34mcascade[0m 
[35m[Hibernate][0m 
    [34mdrop[0m [34mtable[0m [34mif[0m [34mexists[0m users [34mcascade[0m 
2025-12-11 21:56:40 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-23 - Shutdown initiated...
2025-12-11 21:56:40 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-23 - Shutdown completed.
2025-12-11 21:56:40 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-12-11 21:56:40 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    [34malter[0m [34mtable[0m cart_items 
       [34mdrop[0m 
       [34mforeign[0m [34mkey[0m fk_cart_item_cart
[35m[Hibernate][0m 
    [34malter[0m [34mtable[0m cart_items 
       [34mdrop[0m 
       [34mforeign[0m [34mkey[0m fk_cart_item_cart
2025-12-11 21:56:40 [SpringApplicationShutdownHook] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-24 - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@29c363c (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
2025-12-11 21:56:40 [SpringApplicationShutdownHook] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-24 - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@3bf1ceee (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
2025-12-11 21:56:40 [SpringApplicationShutdownHook] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-24 - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@2d8f9fd9 (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
2025-12-11 21:56:40 [SpringApplicationShutdownHook] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-24 - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@4993b3cb (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
2025-12-11 21:56:40 [SpringApplicationShutdownHook] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-24 - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@5d5806a6 (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
2025-12-11 21:56:40 [SpringApplicationShutdownHook] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-24 - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@71f993ea (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
2025-12-11 21:56:40 [SpringApplicationShutdownHook] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-24 - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@21b1bdf3 (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
2025-12-11 21:56:40 [SpringApplicationShutdownHook] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-24 - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@3ae73674 (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
2025-12-11 21:56:40 [SpringApplicationShutdownHook] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-24 - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@25683c0f (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
2025-12-11 21:56:40 [SpringApplicationShutdownHook] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-24 - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@45fd007c (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
2025-12-11 21:56:40 [SpringApplicationShutdownHook] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-24 - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@7ae76c25 (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
2025-12-11 21:56:40 [SpringApplicationShutdownHook] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-24 - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@47dc9aed (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
2025-12-11 21:56:40 [SpringApplicationShutdownHook] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-24 - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@45ce1d82 (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
2025-12-11 21:56:40 [SpringApplicationShutdownHook] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-24 - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@7036a9ee (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
2025-12-11 21:56:40 [SpringApplicationShutdownHook] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-24 - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@f99b21b (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
2025-12-11 21:56:40 [SpringApplicationShutdownHook] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-24 - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@6bce8649 (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
2025-12-11 21:56:40 [SpringApplicationShutdownHook] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-24 - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@6793861d (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
2025-12-11 21:56:44 [HikariPool-25:housekeeper] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-25 - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@74fa0f23 (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
2025-12-11 21:56:45 [HikariPool-25:housekeeper] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-25 - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@209f00fa (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
2025-12-11 21:56:45 [HikariPool-24:connection-adder] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-24 - Pool is empty, failed to create/setup connection (b67e16da-a96c-4a83-8896-a6472694ea43)
com.mysql.cj.jdbc.exceptions.CommunicationsException: Communications link failure

The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.
	at com.mysql.cj.jdbc.exceptions.SQLError.createCommunicationsException(SQLError.java:165) ~[mysql-connector-j-9.4.0.jar:9.4.0]
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:55) ~[mysql-connector-j-9.4.0.jar:9.4.0]
	at com.mysql.cj.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:839) ~[mysql-connector-j-9.4.0.jar:9.4.0]
	at com.mysql.cj.jdbc.ConnectionImpl.<init>(ConnectionImpl.java:415) ~[mysql-connector-j-9.4.0.jar:9.4.0]
	at com.mysql.cj.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:237) ~[mysql-connector-j-9.4.0.jar:9.4.0]
	at com.mysql.cj.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:180) ~[mysql-connector-j-9.4.0.jar:9.4.0]
	at com.zaxxer.hikari.util.DriverDataSource.getConnection(DriverDataSource.java:144) ~[HikariCP-6.3.3.jar:na]
	at com.zaxxer.hikari.pool.PoolBase.newConnection(PoolBase.java:370) ~[HikariCP-6.3.3.jar:na]
	at com.zaxxer.hikari.pool.PoolBase.newPoolEntry(PoolBase.java:207) ~[HikariCP-6.3.3.jar:na]
	at com.zaxxer.hikari.pool.HikariPool.createPoolEntry(HikariPool.java:488) ~[HikariCP-6.3.3.jar:na]
	at com.zaxxer.hikari.pool.HikariPool$PoolEntryCreator.call(HikariPool.java:752) ~[HikariCP-6.3.3.jar:na]
	at com.zaxxer.hikari.pool.HikariPool$PoolEntryCreator.call(HikariPool.java:731) ~[HikariCP-6.3.3.jar:na]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642) ~[na:na]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]
Caused by: com.mysql.cj.exceptions.CJCommunicationsException: Communications link failure

The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.
	at java.base/jdk.internal.reflect.DirectConstructorHandleAccessor.newInstance(DirectConstructorHandleAccessor.java:62) ~[na:na]
	at java.base/java.lang.reflect.Constructor.newInstanceWithCaller(Constructor.java:502) ~[na:na]
	at java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:486) ~[na:na]
	at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:52) ~[mysql-connector-j-9.4.0.jar:9.4.0]
	at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:95) ~[mysql-connector-j-9.4.0.jar:9.4.0]
	at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:140) ~[mysql-connector-j-9.4.0.jar:9.4.0]
	at com.mysql.cj.exceptions.ExceptionFactory.createCommunicationsException(ExceptionFactory.java:156) ~[mysql-connector-j-9.4.0.jar:9.4.0]
	at com.mysql.cj.protocol.a.NativeSocketConnection.connect(NativeSocketConnection.java:79) ~[mysql-connector-j-9.4.0.jar:9.4.0]
	at com.mysql.cj.NativeSession.connect(NativeSession.java:142) ~[mysql-connector-j-9.4.0.jar:9.4.0]
	at com.mysql.cj.jdbc.ConnectionImpl.connectOneTryOnly(ConnectionImpl.java:963) ~[mysql-connector-j-9.4.0.jar:9.4.0]
	at com.mysql.cj.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:827) ~[mysql-connector-j-9.4.0.jar:9.4.0]
	... 13 common frames omitted
Caused by: java.net.ConnectException: Connection refused
	at java.base/sun.nio.ch.Net.pollConnect(Native Method) ~[na:na]
	at java.base/sun.nio.ch.Net.pollConnectNow(Net.java:682) ~[na:na]
	at java.base/sun.nio.ch.NioSocketImpl.timedFinishConnect(NioSocketImpl.java:549) ~[na:na]
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:592) ~[na:na]
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327) ~[na:na]
	at java.base/java.net.Socket.connect(Socket.java:751) ~[na:na]
	at com.mysql.cj.protocol.StandardSocketFactory.connect(StandardSocketFactory.java:144) ~[mysql-connector-j-9.4.0.jar:9.4.0]
	at com.mysql.cj.protocol.a.NativeSocketConnection.connect(NativeSocketConnection.java:53) ~[mysql-connector-j-9.4.0.jar:9.4.0]
	... 16 common frames omitted
2025-12-11 21:56:45 [HikariPool-25:housekeeper] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-25 - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@580acb8b (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
2025-12-11 21:56:45 [HikariPool-25:housekeeper] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-25 - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@da8a8c0 (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
2025-12-11 21:56:46 [HikariPool-25:housekeeper] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-25 - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@430e2372 (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
2025-12-11 21:56:46 [HikariPool-25:housekeeper] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-25 - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@19000f5a (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
2025-12-11 21:56:46 [HikariPool-25:housekeeper] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-25 - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@51f5716e (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
2025-12-11 21:56:46 [HikariPool-25:housekeeper] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-25 - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@2b4b15e5 (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
2025-12-11 21:56:47 [HikariPool-25:housekeeper] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-25 - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@24b68b03 (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
2025-12-11 21:56:47 [HikariPool-25:housekeeper] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-25 - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@20cf5b9d (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
2025-12-11 21:56:48 [HikariPool-25:housekeeper] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-25 - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@540516b1 (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
2025-12-11 21:56:48 [HikariPool-25:housekeeper] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-25 - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@6eb921c8 (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
2025-12-11 21:56:50 [HikariPool-25:housekeeper] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-25 - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@14e50819 (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
2025-12-11 21:56:50 [HikariPool-25:housekeeper] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-25 - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@70f817e6 (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
2025-12-11 21:56:50 [HikariPool-25:housekeeper] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-25 - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@7cc0610e (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
2025-12-11 21:56:50 [HikariPool-25:housekeeper] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-25 - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@5d13ed12 (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
2025-12-11 21:56:50 [SpringApplicationShutdownHook] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: 08S01
2025-12-11 21:56:50 [SpringApplicationShutdownHook] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - HikariPool-24 - Connection is not available, request timed out after 10006ms (total=0, active=0, idle=0, waiting=0)
2025-12-11 21:56:50 [SpringApplicationShutdownHook] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - Communications link failure

The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.
2025-12-11 21:56:50 [SpringApplicationShutdownHook] WARN  o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'entityManagerFactory': org.hibernate.exception.JDBCConnectionException: Unable to open JDBC Connection for DDL execution [HikariPool-24 - Connection is not available, request timed out after 10006ms (total=0, active=0, idle=0, waiting=0)] [n/a]
2025-12-11 21:56:50 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-24 - Shutdown initiated...
2025-12-11 21:56:51 [HikariPool-25:housekeeper] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-25 - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@2a9376bb (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
2025-12-11 21:56:51 [HikariPool-25:housekeeper] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-25 - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@501707fa (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
2025-12-11 21:56:52 [HikariPool-25:housekeeper] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-25 - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@5178db73 (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
2025-12-11 21:56:52 [HikariPool-25:housekeeper] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-25 - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@68bd83a6 (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
2025-12-11 21:56:53 [HikariPool-25:housekeeper] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-25 - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@7db896e0 (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
2025-12-11 21:56:53 [HikariPool-25:housekeeper] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-25 - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@63a322ea (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
2025-12-11 21:56:54 [HikariPool-25:housekeeper] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-25 - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@53cc99c5 (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
2025-12-11 21:56:54 [HikariPool-25:housekeeper] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-25 - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@77b37e51 (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
2025-12-11 21:56:54 [HikariPool-25:housekeeper] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-25 - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@7aa92261 (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
2025-12-11 21:56:54 [HikariPool-25:housekeeper] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-25 - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@76d23633 (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
2025-12-11 21:56:55 [HikariPool-25:housekeeper] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-25 - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@6cab42c8 (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
2025-12-11 21:56:55 [HikariPool-25:housekeeper] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-25 - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@6da02095 (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
2025-12-11 21:56:55 [HikariPool-25:housekeeper] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-25 - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@128b9e6d (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
2025-12-11 21:56:55 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-24 - Shutdown completed.
2025-12-11 21:56:55 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-12-11 21:56:55 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-25 - Shutdown initiated...
2025-12-11 21:57:00 [scheduling-1] INFO  i.h.e.i.b.ProductSalesAggregateScheduler - === Product Sales Aggregation Batch START (target date: 2025-12-10) ===
2025-12-11 21:57:00 [scheduling-1] INFO  i.h.e.i.b.ProductSalesAggregateScheduler - Product sales aggregation completed successfully for date: 2025-12-10
2025-12-11 21:57:00 [scheduling-1] INFO  i.h.e.i.b.ProductSalesAggregateScheduler - === Product Sales Aggregation Batch END (SUCCESS) ===
2025-12-11 21:57:00 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-25 - Shutdown completed.
2025-12-11 21:57:00 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-12-11 21:57:00 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    [34mdrop[0m [34mtable[0m [34mif[0m [34mexists[0m cart_items [34mcascade[0m 
[35m[Hibernate][0m 
    [34mdrop[0m [34mtable[0m [34mif[0m [34mexists[0m cart_items [34mcascade[0m 
2025-12-11 21:57:00 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    [34mdrop[0m [34mtable[0m [34mif[0m [34mexists[0m carts [34mcascade[0m 
[35m[Hibernate][0m 
    [34mdrop[0m [34mtable[0m [34mif[0m [34mexists[0m carts [34mcascade[0m 
2025-12-11 21:57:00 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    [34mdrop[0m [34mtable[0m [34mif[0m [34mexists[0m charge_balance_idempotency [34mcascade[0m 
[35m[Hibernate][0m 
    [34mdrop[0m [34mtable[0m [34mif[0m [34mexists[0m charge_balance_idempotency [34mcascade[0m 
2025-12-11 21:57:00 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    [34mdrop[0m [34mtable[0m [34mif[0m [34mexists[0m coupons [34mcascade[0m 
[35m[Hibernate][0m 
    [34mdrop[0m [34mtable[0m [34mif[0m [34mexists[0m coupons [34mcascade[0m 
2025-12-11 21:57:00 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    [34mdrop[0m [34mtable[0m [34mif[0m [34mexists[0m order_idempotency [34mcascade[0m 
[35m[Hibernate][0m 
    [34mdrop[0m [34mtable[0m [34mif[0m [34mexists[0m order_idempotency [34mcascade[0m 
2025-12-11 21:57:00 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    [34mdrop[0m [34mtable[0m [34mif[0m [34mexists[0m order_items [34mcascade[0m 
[35m[Hibernate][0m 
    [34mdrop[0m [34mtable[0m [34mif[0m [34mexists[0m order_items [34mcascade[0m 
2025-12-11 21:57:00 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    [34mdrop[0m [34mtable[0m [34mif[0m [34mexists[0m orders [34mcascade[0m 
[35m[Hibernate][0m 
    [34mdrop[0m [34mtable[0m [34mif[0m [34mexists[0m orders [34mcascade[0m 
2025-12-11 21:57:00 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    [34mdrop[0m [34mtable[0m [34mif[0m [34mexists[0m payment_idempotency [34mcascade[0m 
[35m[Hibernate][0m 
    [34mdrop[0m [34mtable[0m [34mif[0m [34mexists[0m payment_idempotency [34mcascade[0m 
2025-12-11 21:57:00 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    [34mdrop[0m [34mtable[0m [34mif[0m [34mexists[0m product_ranking_backup [34mcascade[0m 
[35m[Hibernate][0m 
    [34mdrop[0m [34mtable[0m [34mif[0m [34mexists[0m product_ranking_backup [34mcascade[0m 
2025-12-11 21:57:00 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    [34mdrop[0m [34mtable[0m [34mif[0m [34mexists[0m product_sales_aggregates [34mcascade[0m 
[35m[Hibernate][0m 
    [34mdrop[0m [34mtable[0m [34mif[0m [34mexists[0m product_sales_aggregates [34mcascade[0m 
2025-12-11 21:57:00 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    [34mdrop[0m [34mtable[0m [34mif[0m [34mexists[0m products [34mcascade[0m 
[35m[Hibernate][0m 
    [34mdrop[0m [34mtable[0m [34mif[0m [34mexists[0m products [34mcascade[0m 
2025-12-11 21:57:00 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    [34mdrop[0m [34mtable[0m [34mif[0m [34mexists[0m user_coupons [34mcascade[0m 
[35m[Hibernate][0m 
    [34mdrop[0m [34mtable[0m [34mif[0m [34mexists[0m user_coupons [34mcascade[0m 
2025-12-11 21:57:00 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    [34mdrop[0m [34mtable[0m [34mif[0m [34mexists[0m users [34mcascade[0m 
[35m[Hibernate][0m 
    [34mdrop[0m [34mtable[0m [34mif[0m [34mexists[0m users [34mcascade[0m 
2025-12-11 21:57:00 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-68 - Shutdown initiated...
2025-12-11 21:57:00 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-68 - Shutdown completed.

> Task :test

204 tests completed, 2 failed, 4 skipped

> Task :test FAILED

FAILURE: Build failed with an exception.

* What went wrong:
Execution failed for task ':test'.
> There were failing tests. See the report at: file:///Users/jsb/hanghe-plus/ecommerce/build/reports/tests/test/index.html

* Try:
> Run with --scan to get full insights.

BUILD FAILED in 4m 31s
5 actionable tasks: 2 executed, 3 up-to-date
