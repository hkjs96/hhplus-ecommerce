-- =====================================================
-- K6 부하 테스트를 위한 테스트 데이터 증가 스크립트
-- =====================================================
-- 목적: 지속적인 부하 테스트를 위해 User 잔액과 Coupon 수량 증가
-- 실행 방법: mysql -u root -p ecommerce < scripts/increase-test-data.sql
-- =====================================================

USE ecommerce;

-- 1. 사용자 잔액 증가 (1억원)
-- 기존: 100만원 → 변경: 1억원
-- 이유: 노트북(150만원) 구매 시 지속적인 주문+결제 테스트 가능
UPDATE users
SET balance = 100000000
WHERE id BETWEEN 1 AND 10;

-- 2. 쿠폰 수량 증가 (10,000개)
-- 기존: 10~20개 → 변경: 10,000개
-- 이유: 동시성 제어 검증 및 지속적인 쿠폰 발급 테스트 가능
UPDATE coupons
SET quantity = 10000
WHERE id IN (1, 2, 3);

-- 3. 검증 쿼리
SELECT
    'Users' AS table_name,
    id,
    name,
    CONCAT(FORMAT(balance, 0), '원') AS balance
FROM users
WHERE id BETWEEN 1 AND 10;

SELECT
    'Coupons' AS table_name,
    id,
    name,
    quantity,
    CONCAT(discount_rate * 100, '%') AS discount
FROM coupons
WHERE id IN (1, 2, 3);

-- =====================================================
-- 실행 결과 예상:
--
-- Users 테이블:
-- +-------+--------+---------------+
-- | id    | name   | balance       |
-- +-------+--------+---------------+
-- | 1-10  | User_N | 100,000,000원 |
-- +-------+--------+---------------+
--
-- Coupons 테이블:
-- +----+-----------+----------+----------+
-- | id | name      | quantity | discount |
-- +----+-----------+----------+----------+
-- | 1  | 신규가입  | 10,000   | 10%      |
-- | 2  | VIP할인   | 10,000   | 20%      |
-- | 3  | 시즌특가  | 10,000   | 15%      |
-- +----+-----------+----------+----------+
-- =====================================================
