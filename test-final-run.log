> Task :clean

> Task :compileJava
Note: Some input files use unchecked or unsafe operations.
Note: Recompile with -Xlint:unchecked for details.

> Task :processResources
> Task :classes
> Task :compileTestJava
> Task :processTestResources
> Task :testClasses
> Task :test

OpenJDK 64-Bit Server VM warning: Sharing is only supported for boot loader classes because bootstrap classpath has been appended

> Task :test

EcommerceApplicationTests > contextLoads() PASSED

CouponIssuanceConcurrencyWithDistributedLockTest > 같은 사용자가 중복 발급 시도 시 1개만 발급됨 (분산락 + DB Constraint) PASSED

CouponIssuanceConcurrencyWithDistributedLockTest > 선착순 10명 쿠폰 - 100명 동시 요청 시 정확히 10개만 발급 (분산락) PASSED

CouponIssuanceConcurrencyWithDistributedLockTest > 선착순 100명 쿠폰 - 200명 동시 요청 시 정확히 100개만 발급 (분산락) PASSED

IssueCouponConcurrencyTest > 쿠폰 중복 발급 방지 - DB Unique Constraint로 TOCTOU 차단 PASSED

IssueCouponConcurrencyTest > 쿠폰 재고 소진 동시성 테스트 - Pessimistic Lock PASSED

CreateOrderConcurrencyWithDistributedLockTest > 동일 사용자 동시 주문 - 분산락으로 직렬화 FAILED
    org.opentest4j.AssertionFailedError: 
    expected: 5
     but was: 0
        at app//io.hhplus.ecommerce.application.usecase.order.CreateOrderConcurrencyWithDistributedLockTest.testSameUserConcurrentOrders_WithDistributedLock(CreateOrderConcurrencyWithDistributedLockTest.java:219)

CreateOrderConcurrencyWithDistributedLockTest > 동시 주문 생성 - 분산락으로 TOCTOU 갭 방지 PASSED

CreateOrderConcurrencyWithDistributedLockTest > 여러 상품 주문 - 데드락 방지 (상품 ID 정렬) PASSED

OrderIdempotencyIntegrationTest > 동시 요청 시 첫 요청만 처리, 나머지는 PROCESSING 에러 FAILED
    java.lang.AssertionError: 
    Expecting actual:
      1
    to be greater than or equal to:
      4
        at io.hhplus.ecommerce.application.usecase.order.OrderIdempotencyIntegrationTest.testConcurrentRequests_OnlyFirstProcessed(OrderIdempotencyIntegrationTest.java:204)

OrderIdempotencyIntegrationTest > 서로 다른 idempotencyKey는 독립적으로 처리 PASSED

OrderIdempotencyIntegrationTest > 중복 재고 차감 방지 - 동일 키로 재요청 시 재고 변경 없음 PASSED

OrderIdempotencyIntegrationTest > 실패 후 재시도 가능 - FAILED 상태에서 재처리 SKIPPED

OrderIdempotencyIntegrationTest > 동일 idempotencyKey로 중복 요청 시 캐시된 응답 반환 PASSED

PaymentConcurrencyWithDistributedLockTest > 재고 50개일 때 100명 요청 시 정확히 50개만 성공 (분산락) SKIPPED

PaymentConcurrencyWithDistributedLockTest > 잔액 충전 동시성 테스트 (분산락) SKIPPED

PaymentConcurrencyWithDistributedLockTest > 100명이 동시 결제 시 재고 100개가 정확히 차감됨 (분산락) SKIPPED

ChargeBalanceIdempotencyTest > 다른 idempotencyKey로 두 번 요청 → 각각 성공 PASSED

ChargeBalanceIdempotencyTest > 같은 idempotencyKey로 두 번 요청 → 중복 충전 방지 PASSED

ChargeBalanceIdempotencyTest > 캐시된 응답 반환 시 DB 업데이트 없음 PASSED

CartItemConcurrencyTest > CartItem 수량 변경 동시성 테스트 - Optimistic Lock으로 Lost Update 방지 PASSED

CartItemConcurrencyTest > 동일 사용자 다른 스레드에서 장바구니 수정 - 충돌 빈도 확인 PASSED

CartItemTest > 수량 업데이트 - 음수 PASSED

CartItemTest > 수량 업데이트 - null PASSED

CartItemTest > 수량 업데이트 - 성공 PASSED

CartItemTest > 수량 증가 - null PASSED

CartItemTest > 장바구니 항목 생성 - cart null PASSED

CartItemTest > 장바구니 항목 생성 - product null PASSED

CartItemTest > 장바구니 항목 생성 - quantity 음수 PASSED

CartItemTest > 장바구니 항목 생성 - quantity 0 PASSED

CartItemTest > 장바구니 항목 생성 - quantity null PASSED

CartItemTest > 수량 증가 - 성공 PASSED

CartItemTest > 수량 업데이트 - 0 PASSED

CartItemTest > 장바구니 항목 생성 - 성공 PASSED

CartTest > 장바구니 생성 - 성공 PASSED

CartTest > 장바구니 생성 - userId null PASSED

CartTest > 장바구니 생성 시 타임스탬프 자동 설정 PASSED

CouponTest > 쿠폰 발급 성공 PASSED

CouponTest > 쿠폰 생성 실패 - 종료일이 null PASSED

CouponTest > 쿠폰 발급 가능 여부 검증 실패 - 만료된 쿠폰 PASSED

CouponTest > 쿠폰 생성 실패 - 할인율이 null PASSED

CouponTest > 쿠폰 생성 실패 - 할인율이 음수 PASSED

CouponTest > 쿠폰 생성 실패 - 총 수량이 null PASSED

CouponTest > 쿠폰 발급 동시성 테스트 - 200명 요청, 100개만 발급 PASSED

CouponTest > 쿠폰 유효기간 확인 - 만료됨 PASSED

CouponTest > 쿠폰 유효기간 확인 - 아직 시작 안 됨 PASSED

CouponTest > 쿠폰 유효기간 확인 - 유효함 PASSED

CouponTest > 쿠폰 생성 실패 - 시작일이 null PASSED

CouponTest > 쿠폰 생성 실패 - 총 수량이 음수 PASSED

CouponTest > 쿠폰 발급 실패 - 수량 소진 PASSED

CouponTest > 쿠폰 생성 실패 - 시작일이 종료일보다 이후 PASSED

CouponTest > 쿠폰 생성 실패 - 할인율이 100 초과 PASSED

CouponTest > 쿠폰 생성 실패 - 총 수량이 0 PASSED

UserCouponTest > 쿠폰 사용 가능 여부 확인 - 사용 가능 PASSED

UserCouponTest > 쿠폰 사용 실패 - 이미 사용된 쿠폰 PASSED

UserCouponTest > 쿠폰 사용 실패 - 만료된 쿠폰 PASSED

UserCouponTest > 쿠폰 사용 성공 PASSED

UserCouponTest > 쿠폰 만료 처리 - 이미 사용된 쿠폰은 상태 변경 안 됨 PASSED

UserCouponTest > 쿠폰 사용 가능 여부 확인 - 만료됨 PASSED

UserCouponTest > 쿠폰 사용 가능 여부 확인 - 사용됨 PASSED

UserCouponTest > 쿠폰 만료 처리 성공 PASSED

UserCouponTest > 사용자 쿠폰 생성 실패 - 쿠폰 ID가 null PASSED

UserCouponTest > 사용자 쿠폰 생성 성공 PASSED

UserCouponTest > 사용자 쿠폰 생성 실패 - 사용자 ID가 null PASSED

UserCouponTest > 사용자 쿠폰 생성 실패 - 만료일이 null PASSED

OrderConcurrencyTest > Order 상태 변경 동시성 테스트 - Optimistic Lock으로 Lost Update 방지 PASSED

OrderConcurrencyTest > Order complete와 cancel 동시 호출 - Optimistic Lock으로 한 가지만 성공 PASSED

OrderItemTest > 주문 항목 생성 - order null PASSED

OrderItemTest > 주문 항목 생성 - product null PASSED

OrderItemTest > 주문 항목 생성 - quantity 음수 PASSED

OrderItemTest > 소계 계산 - 성공 PASSED

OrderItemTest > 주문 항목 생성 - quantity 0 PASSED

OrderItemTest > 주문 항목 생성 - quantity null PASSED

OrderItemTest > 주문 항목 생성 - unitPrice 음수 PASSED

OrderItemTest > 주문 항목 생성 - 성공 PASSED

OrderItemTest > 주문 항목 생성 - unitPrice null PASSED

OrderTest > 주문 생성 실패 - 주문 금액이 0 PASSED

OrderTest > 주문 취소 처리 실패 - PENDING이 아닌 상태 PASSED

OrderTest > 주문 취소 후 완료 시도 실패 PASSED

OrderTest > 주문 생성 실패 - 주문 금액이 음수 PASSED

OrderTest > 주문 생성 실패 - 할인 금액이 null PASSED

OrderTest > 주문 생성 성공 - 할인 없음 PASSED

OrderTest > 주문 생성 실패 - 할인 금액이 음수 PASSED

OrderTest > 결제 완료 처리 성공 - PENDING에서 COMPLETED로 상태 전이 PASSED

OrderTest > 주문 취소 처리 성공 - PENDING에서 CANCELLED로 상태 전이 PASSED

OrderTest > 주문 상태 확인 메서드 PASSED

OrderTest > 결제 완료 처리 실패 - PENDING이 아닌 상태 PASSED

OrderTest > 주문 생성 실패 - 주문 금액이 null PASSED

OrderTest > 주문 생성 성공 - 금액 계산 검증 PASSED

OrderTest > 취소된 주문 상태 확인 PASSED

OrderTest > 주문 생성 실패 - 할인 금액이 주문 금액보다 큼 PASSED

ProductTest > 재고 차감 실패 - 재고 부족 PASSED

ProductTest > 상품 생성 실패 - 가격이 음수 PASSED

ProductTest > 상품 업데이트 성공 - 가격 변경 PASSED

ProductTest > 재고 복구 성공 PASSED

ProductTest > 상품 생성 실패 - 재고가 null PASSED

ProductTest > 상품 생성 실패 - 가격이 0 PASSED

ProductTest > 재고 확인 - 부족함 PASSED

ProductTest > 상품 생성 실패 - 재고가 음수 PASSED

ProductTest > 재고 확인 - 충분함 PASSED

ProductTest > 상품 업데이트 실패 - 가격이 음수 PASSED

ProductTest > 재고 차감 실패 - 수량이 0 PASSED

ProductTest > 상품 생성 실패 - 가격이 null PASSED

ProductTest > 재고 복구 실패 - 수량이 0 PASSED

ProductTest > 재고 차감 성공 PASSED

ProductTest > 재고 차감 실패 - 수량이 음수 PASSED

ProductTest > 재고 복구 실패 - 수량이 음수 PASSED

ProductTest > 상품 업데이트 실패 - 가격이 0 PASSED

UserBalanceOptimisticLockConcurrencyTest > [제이코치 피드백] 충전과 차감 동시 발생 시 Lost Update 방지 PASSED

UserBalanceOptimisticLockConcurrencyTest > 100명이 동시에 1,000원씩 차감 시 정확한 잔액 처리 PASSED

UserBalanceOptimisticLockConcurrencyTest > [제이코치 피드백] 10명이 동시에 10,000원씩 차감 시 최종 잔액 0원 (Optimistic Lock) PASSED

UserBalanceOptimisticLockConcurrencyTest > @Version 증가 확인 - 업데이트마다 version이 증가함 PASSED

UserBalanceOptimisticLockConcurrencyTest > [제이코치 피드백] 잔액 50,000원일 때 10명이 10,000원씩 차감 시 5명만 성공 PASSED

UserTest > 잔액 확인 - 부족함 PASSED

UserTest > 잔액 확인 - 충분함 PASSED

UserTest > 사용자 생성 실패 - 이메일 형식이 잘못됨 (@없음) PASSED

UserTest > 포인트 충전 실패 - 충전 금액이 0 PASSED

UserTest > 포인트 차감 실패 - 차감 금액이 null PASSED

UserTest > 포인트 충전 실패 - 충전 금액이 null PASSED

UserTest > 사용자 생성 실패 - 사용자명이 공백 PASSED

UserTest > 포인트 차감 실패 - 차감 금액이 음수 PASSED

UserTest > 포인트 충전 실패 - 충전 금액이 음수 PASSED

UserTest > 사용자 생성 성공 PASSED

UserTest > 사용자 생성 실패 - 사용자명이 빈 문자열 PASSED

UserTest > 사용자 생성 실패 - 사용자명이 null PASSED

UserTest > 포인트 차감 실패 - 잔액 부족 PASSED

UserTest > 사용자 생성 실패 - 이메일이 빈 문자열 PASSED

UserTest > 사용자 생성 실패 - 이메일이 null PASSED

UserTest > 포인트 충전 성공 PASSED

UserTest > 포인트 차감 성공 PASSED

UserTest > 사용자 생성 실패 - 이메일이 공백 PASSED

UserTest > 포인트 차감 실패 - 차감 금액이 0 PASSED

ProductSalesAggregateSchedulerTest > 배치 집계 메서드 실행 테스트 (동시성 문제 없음) PASSED

ProductSalesAggregateSchedulerTest > 배치 스케줄러 30초 설정 확인 (수동 테스트) PASSED

ProductSalesAggregateSchedulerTest > ProductSalesAggregateScheduler 빈 등록 확인 PASSED

JpaOrderRepository 통합 테스트 (MySQL Testcontainers) > findByIdOrThrow - 존재하지 않는 주문 조회 시 예외 발생 PASSED

JpaOrderRepository 통합 테스트 (MySQL Testcontainers) > 주문 상태 변경 후 저장 성공 PASSED

JpaOrderRepository 통합 테스트 (MySQL Testcontainers) > 주문 번호로 조회 성공 PASSED

JpaOrderRepository 통합 테스트 (MySQL Testcontainers) > 사용자 ID로 주문 목록 조회 성공 (최신순 정렬) PASSED

JpaOrderRepository 통합 테스트 (MySQL Testcontainers) > 다른 사용자의 주문은 조회되지 않음 PASSED

JpaOrderRepository 통합 테스트 (MySQL Testcontainers) > 주문 저장 및 조회 성공 PASSED

JpaOrderRepository 통합 테스트 (MySQL Testcontainers) > findByOrderNumberOrThrow - 존재하지 않는 주문 번호 조회 시 예외 발생 PASSED

ProductRankingRepositoryTest > 동시에 100개 요청 시 score가 정확히 100 증가한다 (ZINCRBY 원자성) PASSED

ProductRankingRepositoryTest > 특정 상품의 순위를 조회한다 PASSED

ProductRankingRepositoryTest > 상위 N개 상품을 조회한다 PASSED

ProductRankingRepositoryTest > 동일 상품에 여러 번 판매량을 증가시킨다 PASSED

ProductRankingRepositoryTest > 랭킹 데이터가 없으면 빈 리스트를 반환한다 PASSED

ProductRankingRepositoryTest > 상품 판매량을 랭킹에 반영한다 PASSED

RedisConnectionTest > 동시성 환경에서 Redis INCR 테스트 PASSED

RedisConnectionTest > Redis 연결 및 INCR 동작 확인 PASSED

DatabasePerformanceAnalysisTest > EXPLAIN 분석 #1: 인기 상품 조회 (인덱스 없음) PASSED

DatabasePerformanceAnalysisTest > 성능 측정 #1: 인기 상품 조회 (인덱스 없음) PASSED

DatabasePerformanceAnalysisTest > 인덱스 생성: 성능 최적화 인덱스 추가 PASSED

DatabasePerformanceAnalysisTest > EXPLAIN 분석 #2: 인기 상품 조회 (인덱스 적용 후) PASSED

DatabasePerformanceAnalysisTest > 성능 측정 #2: 인기 상품 조회 (인덱스 적용 후) PASSED

DatabasePerformanceAnalysisTest > EXPLAIN 분석 #3: 주문 내역 조회 (단일 쿼리) PASSED

DatabasePerformanceAnalysisTest > 성능 측정 #3: 주문 내역 조회 PASSED

DatabasePerformanceAnalysisTest > EXPLAIN 분석 #4: 장바구니 조회 PASSED

DatabasePerformanceAnalysisTest > EXPLAIN 분석 #5: 쿠폰 조회 PASSED

N1ProblemVerificationTest > N+1 문제 검증: Order 조회 시 OrderItem이 Batch로 로딩되는지 확인 PASSED

N1ProblemVerificationTest > N+1 해결 전후 비교: OrderItem 조회 시 쿼리 개수 확인 PASSED

N1ProblemVerificationTest > 실전 시나리오: 사용자의 주문 목록 조회 PASSED

CartControllerIntegrationTest > 통합 테스트: 장바구니 조회 - 성공 (항목 있음) PASSED

CartControllerIntegrationTest > 통합 테스트: 장바구니 조회 - 실패 (사용자 없음) PASSED

CartControllerIntegrationTest > 통합 테스트: 장바구니 상품 삭제 - 실패 (장바구니 항목 없음) PASSED

CartControllerIntegrationTest > 통합 테스트: 장바구니 상품 수량 변경 - 실패 (재고 부족) PASSED

CartControllerIntegrationTest > 통합 테스트: 장바구니에 상품 추가 - 실패 (사용자 없음) PASSED

CartControllerIntegrationTest > 통합 테스트: 장바구니에 상품 추가 - 성공 PASSED

CartControllerIntegrationTest > 통합 테스트: 장바구니 조회 - 재고 부족 상품 표시 PASSED

CartControllerIntegrationTest > 통합 테스트: 장바구니 상품 수량 변경 - 수량 0 시 삭제 PASSED

CartControllerIntegrationTest > 통합 테스트: 장바구니 상품 수량 변경 - 실패 (장바구니 없음) PASSED

CartControllerIntegrationTest > 통합 테스트: 장바구니 상품 수량 변경 - 성공 PASSED

CartControllerIntegrationTest > 통합 테스트: 장바구니 상품 삭제 - 실패 (장바구니 없음) PASSED
